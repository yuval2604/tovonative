{"ast":null,"code":"import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectSpread from\"@babel/runtime/helpers/objectSpread\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/brentvatne/coding/react-navigation-stack/src/views/Header/Header.tsx\";import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import Image from\"react-native-web/dist/exports/Image\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import MaskedViewIOS from\"react-native-web/dist/exports/MaskedViewIOS\";import{withOrientation,SafeAreaView}from'@react-navigation/native';import HeaderTitle from\"./HeaderTitle\";import HeaderBackButton from\"./HeaderBackButton\";import ModularHeaderBackButton from\"./ModularHeaderBackButton\";import HeaderStyleInterpolator from\"./HeaderStyleInterpolator\";var APPBAR_HEIGHT=Platform.select({ios:44,android:56,default:64});var STATUSBAR_HEIGHT=Platform.select({ios:20,default:0});var TITLE_OFFSET_CENTER_ALIGN=Platform.select({ios:70,default:56});var TITLE_OFFSET_LEFT_ALIGN=Platform.select({ios:20,android:56,default:64});var getTitleOffsets=function getTitleOffsets(layoutPreset,hasLeftComponent,hasRightComponent){if(layoutPreset==='left'){var style={left:TITLE_OFFSET_LEFT_ALIGN,right:TITLE_OFFSET_LEFT_ALIGN};if(!hasLeftComponent){style.left=Platform.OS==='web'?16:0;}if(!hasRightComponent){style.right=0;}return style;}else if(layoutPreset==='center'){var _style={left:TITLE_OFFSET_CENTER_ALIGN,right:TITLE_OFFSET_CENTER_ALIGN};if(!hasLeftComponent&&!hasRightComponent){_style.left=0;_style.right=0;}return _style;}return undefined;};var getAppBarHeight=function getAppBarHeight(isLandscape){if(Platform.OS==='ios'){if(isLandscape&&!Platform.isPad){return 32;}else{return 44;}}else if(Platform.OS==='android'){return 56;}else{return 64;}};var Header=function(_React$PureComponent){_inherits(Header,_React$PureComponent);function Header(){var _getPrototypeOf2;var _this;_classCallCheck(this,Header);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Header)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={widths:{}};_this.renderTitleComponent=function(props){var layoutPreset=_this.props.layoutPreset;var options=props.scene.descriptor.options;var headerTitle=options.headerTitle;if(React.isValidElement(headerTitle)){return headerTitle;}var titleString=_this.getHeaderTitleString(props.scene);var titleStyle=options.headerTitleStyle;var color=options.headerTintColor;var allowFontScaling=options.headerTitleAllowFontScaling;var onLayout=layoutPreset==='center'?function(e){var width=e.nativeEvent.layout.width;_this.setState(function(state){return{widths:_objectSpread({},state.widths,_defineProperty({},props.scene.key,width))};});}:undefined;var HeaderTitleComponent=headerTitle&&typeof headerTitle!=='string'?headerTitle:HeaderTitle;return React.createElement(HeaderTitleComponent,{onLayout:onLayout,allowFontScaling:!!allowFontScaling,style:[color?{color:color}:null,layoutPreset==='center'?{textAlign:'center'}:{textAlign:'left'},titleStyle],__source:{fileName:_jsxFileName,lineNumber:218}},titleString);};_this.renderLeftComponent=function(props){var options=props.scene.descriptor.options;if(React.isValidElement(options.headerLeft)||options.headerLeft===null){return options.headerLeft;}if(!options.headerLeft&&props.scene.index===0){return;}var backButtonTitle=_this.getBackButtonTitleString(props.scene);var truncatedBackButtonTitle=_this.getTruncatedBackButtonTitle(props.scene);var width=_this.state.widths[props.scene.key]?(_this.props.layout.initWidth-_this.state.widths[props.scene.key])/2:undefined;var RenderedLeftComponent=options.headerLeft||HeaderBackButton;var goBack=function goBack(){requestAnimationFrame(function(){props.scene.descriptor.navigation.goBack(props.scene.descriptor.key);});};return React.createElement(RenderedLeftComponent,{onPress:goBack,pressColorAndroid:options.headerPressColorAndroid,tintColor:options.headerTintColor,backImage:options.headerBackImage,title:backButtonTitle,truncatedTitle:truncatedBackButtonTitle,backTitleVisible:_this.props.backTitleVisible,allowFontScaling:options.headerBackAllowFontScaling,titleStyle:options.headerBackTitleStyle,layoutPreset:_this.props.layoutPreset,width:width,scene:props.scene,__source:{fileName:_jsxFileName,lineNumber:264}});};_this.renderModularLeftComponent=function(props,ButtonContainerComponent,LabelContainerComponent){var _props$scene$descript=props.scene.descriptor,options=_props$scene$descript.options,navigation=_props$scene$descript.navigation;var backButtonTitle=_this.getBackButtonTitleString(props.scene);var truncatedBackButtonTitle=_this.getTruncatedBackButtonTitle(props.scene);var width=_this.state.widths[props.scene.key]?(_this.props.layout.initWidth-_this.state.widths[props.scene.key])/2:undefined;var goBack=function goBack(){requestAnimationFrame(function(){navigation.goBack(props.scene.descriptor.key);});};return React.createElement(ModularHeaderBackButton,{onPress:goBack,ButtonContainerComponent:ButtonContainerComponent,LabelContainerComponent:LabelContainerComponent,backTitleVisible:_this.props.backTitleVisible,pressColorAndroid:options.headerPressColorAndroid,tintColor:options.headerTintColor,backImage:options.headerBackImage,title:backButtonTitle,truncatedTitle:truncatedBackButtonTitle,titleStyle:options.headerBackTitleStyle,layoutPreset:_this.props.layoutPreset,width:width,scene:props.scene,__source:{fileName:_jsxFileName,lineNumber:307}});};_this.renderRightComponent=function(props){var headerRight=props.scene.descriptor.options.headerRight;return headerRight||null;};_this.renderLeft=function(props){var options=props.scene.descriptor.options;var transitionPreset=_this.props.transitionPreset;var style=props.style;if(options.headerLeftContainerStyle){style=[style,options.headerLeftContainerStyle];}if(transitionPreset!=='uikit'||options.headerBackImage||options.headerLeft||options.headerLeft===null){return _this.renderSubView(_objectSpread({},props,{style:style}),'left',_this.renderLeftComponent,_this.props.leftInterpolator);}else{return _this.renderModularSubView(_objectSpread({},props,{style:style}),'left',_this.renderModularLeftComponent,_this.props.leftLabelInterpolator,_this.props.leftButtonInterpolator);}};_this.renderTitle=function(props,options){var _this$props=_this.props,layoutPreset=_this$props.layoutPreset,transitionPreset=_this$props.transitionPreset;var style=[{justifyContent:layoutPreset==='center'?'center':'flex-start'},getTitleOffsets(layoutPreset,options.hasLeftComponent,options.hasRightComponent),options.headerTitleContainerStyle];return _this.renderSubView(_objectSpread({},props,{style:style}),'title',_this.renderTitleComponent,transitionPreset==='uikit'?_this.props.titleFromLeftInterpolator:_this.props.titleInterpolator);};_this.renderRight=function(props){var options=props.scene.descriptor.options;var style=props.style;if(options.headerRightContainerStyle){style=[style,options.headerRightContainerStyle];}return _this.renderSubView(_objectSpread({},props,{style:style}),'right',_this.renderRightComponent,_this.props.rightInterpolator);};_this.renderBackground=function(props){var _props$scene=props.scene,index=_props$scene.index,options=_props$scene.descriptor.options;var offset=_this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}return _this.renderSubView(_objectSpread({},props,{style:StyleSheet.absoluteFill}),'background',function(){return options.headerBackground;},_this.props.backgroundInterpolator);};_this.renderModularSubView=function(props,name,renderer,labelStyleInterpolator,buttonStyleInterpolator){var scene=props.scene;var index=scene.index,isStale=scene.isStale,key=scene.key;if(index===0){return;}var offset=_this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}var ButtonContainer=function ButtonContainer(_ref){var children=_ref.children;return React.createElement(Animated.View,{style:[buttonStyleInterpolator(_objectSpread({},_this.props,props))],__source:{fileName:_jsxFileName,lineNumber:464}},children);};var LabelContainer=function LabelContainer(_ref2){var children=_ref2.children;return React.createElement(Animated.View,{style:[labelStyleInterpolator(_objectSpread({},_this.props,props))],__source:{fileName:_jsxFileName,lineNumber:472}},children);};var subView=renderer(props,ButtonContainer,LabelContainer);if(subView===null){return subView;}var pointerEvents=offset!==0||isStale?'none':'box-none';return React.createElement(View,{key:name+\"_\"+key,pointerEvents:pointerEvents,style:[styles.item,styles[name],props.style],__source:{fileName:_jsxFileName,lineNumber:492}},subView);};_this.renderSubView=function(props,name,renderer,styleInterpolator){var scene=props.scene;var index=scene.index,isStale=scene.isStale,key=scene.key;var offset=_this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}var subView=renderer(props);if(subView==null){return null;}var pointerEvents=offset!==0||isStale?'none':'box-none';return React.createElement(Animated.View,{pointerEvents:pointerEvents,key:name+\"_\"+key,style:[styles.item,styles[name],props.style,styleInterpolator(_objectSpread({},_this.props,props))],__source:{fileName:_jsxFileName,lineNumber:528}},subView);};_this.renderHeader=function(props){var options=props.scene.descriptor.options;if(options.header===null){return null;}var left=_this.renderLeft(props);var right=_this.renderRight(props);var title=_this.renderTitle(props,{hasLeftComponent:!!left,hasRightComponent:!!right,headerTitleContainerStyle:options.headerTitleContainerStyle});var transitionPreset=_this.props.transitionPreset;var wrapperProps={style:styles.header,key:\"scene_\"+props.scene.key};if(options.headerLeft||options.headerBackImage||Platform.OS!=='ios'||transitionPreset!=='uikit'){return React.createElement(View,_extends({},wrapperProps,{__source:{fileName:_jsxFileName,lineNumber:573}}),title,left,right);}else{return React.createElement(MaskedViewIOS,_extends({},wrapperProps,{maskElement:React.createElement(View,{style:styles.iconMaskContainer,__source:{fileName:_jsxFileName,lineNumber:584}},React.createElement(Image,{source:require(\"../assets/back-icon-mask.png\"),style:styles.iconMask,__source:{fileName:_jsxFileName,lineNumber:585}}),React.createElement(View,{style:styles.iconMaskFillerRect,__source:{fileName:_jsxFileName,lineNumber:589}})),__source:{fileName:_jsxFileName,lineNumber:581}}),title,left,right);}};return _this;}_createClass(Header,[{key:\"getHeaderTitleString\",value:function getHeaderTitleString(scene){var options=scene.descriptor.options;if(typeof options.headerTitle==='string'){return options.headerTitle;}if(options.title&&typeof options.title!=='string'&&__DEV__){throw new Error(\"Invalid title for route \\\"\"+scene.route.routeName+\"\\\" - title must be string or null, instead it was of type \"+typeof options.title);}return options.title;}},{key:\"getLastScene\",value:function getLastScene(scene){return this.props.scenes.find(function(s){return s.index===scene.index-1;});}},{key:\"getBackButtonTitleString\",value:function getBackButtonTitleString(scene){var lastScene=this.getLastScene(scene);if(!lastScene){return null;}var headerBackTitle=lastScene.descriptor.options.headerBackTitle;if(headerBackTitle||headerBackTitle===null){return headerBackTitle;}return this.getHeaderTitleString(lastScene);}},{key:\"getTruncatedBackButtonTitle\",value:function getTruncatedBackButtonTitle(scene){var lastScene=this.getLastScene(scene);if(!lastScene){return null;}return lastScene.descriptor.options.headerTruncatedBackTitle;}},{key:\"render\",value:function render(){var _this2=this;var appBar;var background;var _this$props2=this.props,mode=_this$props2.mode,scene=_this$props2.scene,isLandscape=_this$props2.isLandscape;if(mode==='float'){var scenesByIndex={};this.props.scenes.forEach(function(scene){scenesByIndex[scene.index]=scene;});var scenesProps=Object.values(scenesByIndex).map(function(scene){return{position:_this2.props.position,scene:scene};});appBar=scenesProps.map(function(props){return _this2.renderHeader(props);});background=scenesProps.map(function(props){return _this2.renderBackground(props);});}else{var headerProps={position:new Animated.Value(this.props.scene.index),scene:this.props.scene};appBar=this.renderHeader(headerProps);background=this.renderBackground(headerProps);}var options=scene.descriptor.options;var _options$headerStyle=options.headerStyle,headerStyle=_options$headerStyle===void 0?{}:_options$headerStyle;var headerStyleObj=StyleSheet.flatten(headerStyle);var appBarHeight=getAppBarHeight(isLandscape);var alignItems=headerStyleObj.alignItems,justifyContent=headerStyleObj.justifyContent,flex=headerStyleObj.flex,flexDirection=headerStyleObj.flexDirection,flexGrow=headerStyleObj.flexGrow,flexShrink=headerStyleObj.flexShrink,flexBasis=headerStyleObj.flexBasis,flexWrap=headerStyleObj.flexWrap,position=headerStyleObj.position,padding=headerStyleObj.padding,paddingHorizontal=headerStyleObj.paddingHorizontal,paddingRight=headerStyleObj.paddingRight,paddingLeft=headerStyleObj.paddingLeft,top=headerStyleObj.top,right=headerStyleObj.right,bottom=headerStyleObj.bottom,left=headerStyleObj.left,safeHeaderStyle=_objectWithoutProperties(headerStyleObj,[\"alignItems\",\"justifyContent\",\"flex\",\"flexDirection\",\"flexGrow\",\"flexShrink\",\"flexBasis\",\"flexWrap\",\"position\",\"padding\",\"paddingHorizontal\",\"paddingRight\",\"paddingLeft\",\"top\",\"right\",\"bottom\",\"left\"]);if(__DEV__){warnIfHeaderStyleDefined(alignItems,'alignItems');warnIfHeaderStyleDefined(justifyContent,'justifyContent');warnIfHeaderStyleDefined(flex,'flex');warnIfHeaderStyleDefined(flexDirection,'flexDirection');warnIfHeaderStyleDefined(flexGrow,'flexGrow');warnIfHeaderStyleDefined(flexShrink,'flexShrink');warnIfHeaderStyleDefined(flexBasis,'flexBasis');warnIfHeaderStyleDefined(flexWrap,'flexWrap');warnIfHeaderStyleDefined(padding,'padding');warnIfHeaderStyleDefined(position,'position');warnIfHeaderStyleDefined(paddingHorizontal,'paddingHorizontal');warnIfHeaderStyleDefined(paddingRight,'paddingRight');warnIfHeaderStyleDefined(paddingLeft,'paddingLeft');warnIfHeaderStyleDefined(top,'top');warnIfHeaderStyleDefined(right,'right');warnIfHeaderStyleDefined(bottom,'bottom');warnIfHeaderStyleDefined(left,'left');}var containerStyles=[options.headerTransparent?styles.transparentContainer:styles.container,{height:appBarHeight},safeHeaderStyle];var headerForceInset=options.headerForceInset;var forceInset=headerForceInset||{top:'always',bottom:'never',horizontal:'always'};return React.createElement(Animated.View,{style:[this.props.layoutInterpolator(this.props),Platform.OS==='ios'&&!options.headerTransparent?{backgroundColor:safeHeaderStyle.backgroundColor||DEFAULT_BACKGROUND_COLOR}:null],__source:{fileName:_jsxFileName,lineNumber:696}},React.createElement(SafeAreaView,{forceInset:forceInset,style:containerStyles,__source:{fileName:_jsxFileName,lineNumber:707}},background,React.createElement(View,{style:styles.flexOne,__source:{fileName:_jsxFileName,lineNumber:709}},appBar)));}}],[{key:\"HEIGHT\",get:function get(){return APPBAR_HEIGHT+STATUSBAR_HEIGHT;}}]);return Header;}(React.PureComponent);Header.defaultProps={layoutInterpolator:HeaderStyleInterpolator.forLayout,leftInterpolator:HeaderStyleInterpolator.forLeft,leftButtonInterpolator:HeaderStyleInterpolator.forLeftButton,leftLabelInterpolator:HeaderStyleInterpolator.forLeftLabel,titleFromLeftInterpolator:HeaderStyleInterpolator.forCenterFromLeft,titleInterpolator:HeaderStyleInterpolator.forCenter,rightInterpolator:HeaderStyleInterpolator.forRight,backgroundInterpolator:HeaderStyleInterpolator.forBackground};function warnIfHeaderStyleDefined(value,styleProp){if(styleProp==='position'&&value==='absolute'){console.warn(\"position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the headerTransparent navigationOption.\");}else if(value!==undefined){console.warn(styleProp+\" was given a value of \"+value+\", this has no effect on headerStyle.\");}}var platformContainerStyles=Platform.select({android:{elevation:4},ios:{borderBottomWidth:StyleSheet.hairlineWidth,borderBottomColor:'#A7A7AA'},default:{boxShadow:\"0 2px 4px -1px rgba(0,0,0,0.2), 0 4px 5px 0 rgba(0,0,0,0.14), 0 1px 10px 0 rgba(0,0,0,0.12)\"}});var DEFAULT_BACKGROUND_COLOR='#FFF';var styles=StyleSheet.create({container:_objectSpread({backgroundColor:DEFAULT_BACKGROUND_COLOR},platformContainerStyles),transparentContainer:_objectSpread({position:'absolute',top:0,left:0,right:0},platformContainerStyles,{borderBottomWidth:0,borderBottomColor:'transparent',elevation:0}),header:_objectSpread({},StyleSheet.absoluteFillObject,{flexDirection:'row'}),item:{backgroundColor:'transparent'},iconMaskContainer:{flex:1,flexDirection:'row',justifyContent:'center'},iconMaskFillerRect:{flex:1,backgroundColor:'#d8d8d8',marginLeft:-5},iconMask:{height:23,width:14.5,marginLeft:8.5,marginTop:-2.5,alignSelf:'center',resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]},background:{},title:{bottom:0,top:0,position:'absolute',alignItems:'center',flexDirection:'row'},left:{left:0,bottom:0,top:0,position:'absolute',alignItems:'center',flexDirection:'row'},right:{right:0,bottom:0,top:0,position:'absolute',flexDirection:'row',alignItems:'center'},flexOne:{flex:1}});export default withOrientation(Header);","map":{"version":3,"sources":["Header.tsx"],"names":["APPBAR_HEIGHT","Platform","ios","android","default","STATUSBAR_HEIGHT","TITLE_OFFSET_CENTER_ALIGN","TITLE_OFFSET_LEFT_ALIGN","getTitleOffsets","layoutPreset","style","left","right","getAppBarHeight","isLandscape","Header","React","PureComponent","defaultProps","layoutInterpolator","HeaderStyleInterpolator","leftInterpolator","leftButtonInterpolator","leftLabelInterpolator","titleFromLeftInterpolator","titleInterpolator","rightInterpolator","backgroundInterpolator","state","widths","scene","options","s","lastScene","headerBackTitle","renderTitleComponent","props","headerTitle","titleString","titleStyle","color","allowFontScaling","onLayout","width","e","HeaderTitleComponent","textAlign","renderLeftComponent","backButtonTitle","truncatedBackButtonTitle","RenderedLeftComponent","goBack","requestAnimationFrame","renderModularLeftComponent","navigation","renderRightComponent","headerRight","renderLeft","transitionPreset","renderTitle","justifyContent","renderRight","renderBackground","index","offset","Math","StyleSheet","renderModularSubView","isStale","key","ButtonContainer","children","buttonStyleInterpolator","LabelContainer","labelStyleInterpolator","subView","renderer","pointerEvents","name","styles","renderSubView","styleInterpolator","renderHeader","title","hasLeftComponent","hasRightComponent","headerTitleContainerStyle","wrapperProps","require","mode","scenesByIndex","scenesProps","Object","position","appBar","background","headerProps","Animated","headerStyle","headerStyleObj","appBarHeight","alignItems","flex","flexDirection","flexGrow","flexShrink","flexBasis","flexWrap","padding","paddingHorizontal","paddingRight","paddingLeft","top","bottom","safeHeaderStyle","warnIfHeaderStyleDefined","containerStyles","height","headerForceInset","forceInset","horizontal","backgroundColor","styleProp","value","console","platformContainerStyles","elevation","borderBottomWidth","borderBottomColor","boxShadow","DEFAULT_BACKGROUND_COLOR","container","transparentContainer","header","item","iconMaskContainer","iconMaskFillerRect","marginLeft","iconMask","marginTop","alignSelf","resizeMode","transform","scaleX","I18nManager","flexOne","withOrientation"],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport {\n  Animated,\n  Image,\n  Platform,\n  StyleSheet,\n  View,\n  I18nManager,\n  MaskedViewIOS,\n  ViewStyle,\n  LayoutChangeEvent,\n  StyleProp,\n} from 'react-native';\n\nimport { withOrientation, SafeAreaView } from '@react-navigation/native';\n\nimport HeaderTitle from './HeaderTitle';\nimport HeaderBackButton from './HeaderBackButton';\nimport ModularHeaderBackButton from './ModularHeaderBackButton';\nimport HeaderStyleInterpolator from './HeaderStyleInterpolator';\nimport {\n  Scene,\n  HeaderLayoutPreset,\n  SceneInterpolatorProps,\n  HeaderProps,\n} from '../../types';\n\ntype Props = HeaderProps & {\n  leftLabelInterpolator: (props: SceneInterpolatorProps) => any;\n  leftButtonInterpolator: (props: SceneInterpolatorProps) => any;\n  titleFromLeftInterpolator: (props: SceneInterpolatorProps) => any;\n  layoutInterpolator: (props: SceneInterpolatorProps) => any;\n};\n\ntype SubviewProps = {\n  position: Animated.AnimatedInterpolation;\n  scene: Scene;\n  style?: StyleProp<ViewStyle>;\n};\n\ntype SubviewName = 'left' | 'right' | 'title' | 'background';\n\ntype State = {\n  widths: { [key: string]: number };\n};\n\nconst APPBAR_HEIGHT = Platform.select({\n  ios: 44,\n  android: 56,\n  default: 64,\n});\nconst STATUSBAR_HEIGHT = Platform.select({\n  ios: 20,\n  default: 0,\n});\n\n// These can be adjusted by using headerTitleContainerStyle on navigationOptions\nconst TITLE_OFFSET_CENTER_ALIGN = Platform.select({\n  ios: 70,\n  default: 56,\n});\n\nconst TITLE_OFFSET_LEFT_ALIGN = Platform.select({\n  ios: 20,\n  android: 56,\n  default: 64,\n});\n\nconst getTitleOffsets = (\n  layoutPreset: HeaderLayoutPreset,\n  hasLeftComponent: boolean,\n  hasRightComponent: boolean\n): ViewStyle | undefined => {\n  if (layoutPreset === 'left') {\n    // Maybe at some point we should do something different if the back title is\n    // explicitly enabled, for now people can control it manually\n\n    let style = {\n      left: TITLE_OFFSET_LEFT_ALIGN,\n      right: TITLE_OFFSET_LEFT_ALIGN,\n    };\n\n    if (!hasLeftComponent) {\n      style.left = Platform.OS === 'web' ? 16 : 0;\n    }\n    if (!hasRightComponent) {\n      style.right = 0;\n    }\n\n    return style;\n  } else if (layoutPreset === 'center') {\n    let style = {\n      left: TITLE_OFFSET_CENTER_ALIGN,\n      right: TITLE_OFFSET_CENTER_ALIGN,\n    };\n    if (!hasLeftComponent && !hasRightComponent) {\n      style.left = 0;\n      style.right = 0;\n    }\n\n    return style;\n  }\n\n  return undefined;\n};\n\nconst getAppBarHeight = (isLandscape: boolean) => {\n  if (Platform.OS === 'ios') {\n    // @ts-ignore\n    if (isLandscape && !Platform.isPad) {\n      return 32;\n    } else {\n      return 44;\n    }\n  } else if (Platform.OS === 'android') {\n    return 56;\n  } else {\n    return 64;\n  }\n};\n\nclass Header extends React.PureComponent<Props, State> {\n  static get HEIGHT() {\n    return APPBAR_HEIGHT + STATUSBAR_HEIGHT;\n  }\n\n  static defaultProps = {\n    layoutInterpolator: HeaderStyleInterpolator.forLayout,\n    leftInterpolator: HeaderStyleInterpolator.forLeft,\n    leftButtonInterpolator: HeaderStyleInterpolator.forLeftButton,\n    leftLabelInterpolator: HeaderStyleInterpolator.forLeftLabel,\n    titleFromLeftInterpolator: HeaderStyleInterpolator.forCenterFromLeft,\n    titleInterpolator: HeaderStyleInterpolator.forCenter,\n    rightInterpolator: HeaderStyleInterpolator.forRight,\n    backgroundInterpolator: HeaderStyleInterpolator.forBackground,\n  };\n\n  state: State = {\n    widths: {},\n  };\n\n  private getHeaderTitleString(scene: Scene) {\n    const options = scene.descriptor.options;\n    if (typeof options.headerTitle === 'string') {\n      return options.headerTitle;\n    }\n\n    if (options.title && typeof options.title !== 'string' && __DEV__) {\n      throw new Error(\n        `Invalid title for route \"${\n          scene.route.routeName\n        }\" - title must be string or null, instead it was of type ${typeof options.title}`\n      );\n    }\n\n    return options.title;\n  }\n\n  private getLastScene(scene: Scene) {\n    return this.props.scenes.find(s => s.index === scene.index - 1);\n  }\n\n  private getBackButtonTitleString(scene: Scene) {\n    const lastScene = this.getLastScene(scene);\n    if (!lastScene) {\n      return null;\n    }\n    const { headerBackTitle } = lastScene.descriptor.options;\n    if (headerBackTitle || headerBackTitle === null) {\n      return headerBackTitle;\n    }\n    return this.getHeaderTitleString(lastScene);\n  }\n\n  private getTruncatedBackButtonTitle(scene: Scene) {\n    const lastScene = this.getLastScene(scene);\n    if (!lastScene) {\n      return null;\n    }\n    return lastScene.descriptor.options.headerTruncatedBackTitle;\n  }\n\n  private renderTitleComponent = (props: SubviewProps) => {\n    const { layoutPreset } = this.props;\n    const { options } = props.scene.descriptor;\n    const headerTitle = options.headerTitle;\n    if (React.isValidElement(headerTitle)) {\n      return headerTitle;\n    }\n    const titleString = this.getHeaderTitleString(props.scene);\n\n    const titleStyle = options.headerTitleStyle;\n    const color = options.headerTintColor;\n    const allowFontScaling = options.headerTitleAllowFontScaling;\n\n    // When title is centered, the width of left/right components depends on the\n    // calculated size of the title.\n    const onLayout =\n      layoutPreset === 'center'\n        ? (e: LayoutChangeEvent) => {\n            const { width } = e.nativeEvent.layout;\n\n            this.setState(state => ({\n              widths: {\n                ...state.widths,\n                [props.scene.key]: width,\n              },\n            }));\n          }\n        : undefined;\n\n    const HeaderTitleComponent =\n      headerTitle && typeof headerTitle !== 'string'\n        ? headerTitle\n        : HeaderTitle;\n    return (\n      <HeaderTitleComponent\n        onLayout={onLayout}\n        allowFontScaling={!!allowFontScaling}\n        style={[\n          color ? { color } : null,\n          layoutPreset === 'center'\n            ? // eslint-disable-next-line react-native/no-inline-styles\n              { textAlign: 'center' }\n            : // eslint-disable-next-line react-native/no-inline-styles\n              { textAlign: 'left' },\n          titleStyle,\n        ]}\n      >\n        {titleString}\n      </HeaderTitleComponent>\n    );\n  };\n\n  private renderLeftComponent = (props: SubviewProps) => {\n    const { options } = props.scene.descriptor;\n    if (\n      React.isValidElement(options.headerLeft) ||\n      options.headerLeft === null\n    ) {\n      return options.headerLeft;\n    }\n\n    if (!options.headerLeft && props.scene.index === 0) {\n      return;\n    }\n\n    const backButtonTitle = this.getBackButtonTitleString(props.scene);\n    const truncatedBackButtonTitle = this.getTruncatedBackButtonTitle(\n      props.scene\n    );\n    const width = this.state.widths[props.scene.key]\n      ? (this.props.layout.initWidth - this.state.widths[props.scene.key]) / 2\n      : undefined;\n    const RenderedLeftComponent = options.headerLeft || HeaderBackButton;\n    const goBack = () => {\n      // Go back on next tick because button ripple effect needs to happen on Android\n      requestAnimationFrame(() => {\n        props.scene.descriptor.navigation.goBack(props.scene.descriptor.key);\n      });\n    };\n    return (\n      <RenderedLeftComponent\n        onPress={goBack}\n        pressColorAndroid={options.headerPressColorAndroid}\n        tintColor={options.headerTintColor}\n        backImage={options.headerBackImage}\n        title={backButtonTitle}\n        truncatedTitle={truncatedBackButtonTitle}\n        backTitleVisible={this.props.backTitleVisible}\n        allowFontScaling={options.headerBackAllowFontScaling}\n        titleStyle={options.headerBackTitleStyle}\n        layoutPreset={this.props.layoutPreset}\n        width={width}\n        scene={props.scene}\n      />\n    );\n  };\n\n  private renderModularLeftComponent = (\n    props: SubviewProps,\n    ButtonContainerComponent: React.ComponentProps<\n      typeof ModularHeaderBackButton\n    >['ButtonContainerComponent'],\n    LabelContainerComponent: React.ComponentProps<\n      typeof ModularHeaderBackButton\n    >['LabelContainerComponent']\n  ) => {\n    const { options, navigation } = props.scene.descriptor;\n    const backButtonTitle = this.getBackButtonTitleString(props.scene);\n    const truncatedBackButtonTitle = this.getTruncatedBackButtonTitle(\n      props.scene\n    );\n    const width = this.state.widths[props.scene.key]\n      ? (this.props.layout.initWidth - this.state.widths[props.scene.key]) / 2\n      : undefined;\n\n    const goBack = () => {\n      // Go back on next tick because button ripple effect needs to happen on Android\n      requestAnimationFrame(() => {\n        navigation.goBack(props.scene.descriptor.key);\n      });\n    };\n\n    return (\n      <ModularHeaderBackButton\n        onPress={goBack}\n        ButtonContainerComponent={ButtonContainerComponent}\n        LabelContainerComponent={LabelContainerComponent}\n        backTitleVisible={this.props.backTitleVisible}\n        pressColorAndroid={options.headerPressColorAndroid}\n        tintColor={options.headerTintColor}\n        backImage={options.headerBackImage}\n        title={backButtonTitle}\n        truncatedTitle={truncatedBackButtonTitle}\n        titleStyle={options.headerBackTitleStyle}\n        layoutPreset={this.props.layoutPreset}\n        width={width}\n        scene={props.scene}\n      />\n    );\n  };\n\n  private renderRightComponent = (props: SubviewProps) => {\n    const { headerRight } = props.scene.descriptor.options;\n    return headerRight || null;\n  };\n\n  private renderLeft = (props: SubviewProps) => {\n    const { options } = props.scene.descriptor;\n\n    const { transitionPreset } = this.props;\n\n    let { style } = props;\n    if (options.headerLeftContainerStyle) {\n      style = [style, options.headerLeftContainerStyle];\n    }\n\n    // On Android, or if we have a custom header left, or if we have a custom back image, we\n    // do not use the modular header (which is the one that imitates UINavigationController)\n    if (\n      transitionPreset !== 'uikit' ||\n      options.headerBackImage ||\n      options.headerLeft ||\n      options.headerLeft === null\n    ) {\n      return this.renderSubView(\n        { ...props, style },\n        'left',\n        this.renderLeftComponent,\n        this.props.leftInterpolator\n      );\n    } else {\n      return this.renderModularSubView(\n        { ...props, style },\n        'left',\n        this.renderModularLeftComponent,\n        this.props.leftLabelInterpolator,\n        this.props.leftButtonInterpolator\n      );\n    }\n  };\n\n  private renderTitle = (\n    props: SubviewProps,\n    options: {\n      hasLeftComponent: boolean;\n      hasRightComponent: boolean;\n      headerTitleContainerStyle: StyleProp<ViewStyle>;\n    }\n  ) => {\n    const { layoutPreset, transitionPreset } = this.props;\n    let style: StyleProp<ViewStyle> = [\n      { justifyContent: layoutPreset === 'center' ? 'center' : 'flex-start' },\n      getTitleOffsets(\n        layoutPreset,\n        options.hasLeftComponent,\n        options.hasRightComponent\n      ),\n      options.headerTitleContainerStyle,\n    ];\n\n    return this.renderSubView(\n      { ...props, style },\n      'title',\n      this.renderTitleComponent,\n      transitionPreset === 'uikit'\n        ? this.props.titleFromLeftInterpolator\n        : this.props.titleInterpolator\n    );\n  };\n\n  private renderRight = (props: SubviewProps) => {\n    const { options } = props.scene.descriptor;\n\n    let { style } = props;\n    if (options.headerRightContainerStyle) {\n      style = [style, options.headerRightContainerStyle];\n    }\n\n    return this.renderSubView(\n      { ...props, style },\n      'right',\n      this.renderRightComponent,\n      this.props.rightInterpolator\n    );\n  };\n\n  private renderBackground = (props: SubviewProps) => {\n    const {\n      index,\n      descriptor: { options },\n    } = props.scene;\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    return this.renderSubView(\n      { ...props, style: StyleSheet.absoluteFill },\n      'background',\n      () => options.headerBackground,\n      this.props.backgroundInterpolator\n    );\n  };\n\n  private renderModularSubView = (\n    props: SubviewProps,\n    name: SubviewName,\n    renderer: (\n      props: SubviewProps,\n      ButtonContainerComponent: React.ComponentProps<\n        typeof ModularHeaderBackButton\n      >['ButtonContainerComponent'],\n      LabelContainerComponent: React.ComponentProps<\n        typeof ModularHeaderBackButton\n      >['LabelContainerComponent']\n    ) => React.ReactNode,\n    labelStyleInterpolator: (props: SceneInterpolatorProps) => any,\n    buttonStyleInterpolator: (props: SceneInterpolatorProps) => any\n  ) => {\n    const { scene } = props;\n    const { index, isStale, key } = scene;\n\n    // Never render a modular back button on the first screen in a stack.\n    if (index === 0) {\n      return;\n    }\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    const ButtonContainer = ({ children }: { children: React.ReactNode }) => (\n      <Animated.View\n        style={[buttonStyleInterpolator({ ...this.props, ...props })]}\n      >\n        {children}\n      </Animated.View>\n    );\n\n    const LabelContainer = ({ children }: { children: React.ReactNode }) => (\n      <Animated.View\n        style={[labelStyleInterpolator({ ...this.props, ...props })]}\n      >\n        {children}\n      </Animated.View>\n    );\n\n    const subView = renderer(\n      props,\n      ButtonContainer as any,\n      LabelContainer as any\n    );\n\n    if (subView === null) {\n      return subView;\n    }\n\n    const pointerEvents = offset !== 0 || isStale ? 'none' : 'box-none';\n\n    return (\n      <View\n        key={`${name}_${key}`}\n        pointerEvents={pointerEvents}\n        style={[styles.item, styles[name], props.style]}\n      >\n        {subView}\n      </View>\n    );\n  };\n\n  private renderSubView = (\n    props: SubviewProps,\n    name: SubviewName,\n    renderer: (props: SubviewProps) => React.ReactNode,\n    styleInterpolator: (props: SceneInterpolatorProps) => any\n  ) => {\n    const { scene } = props;\n    const { index, isStale, key } = scene;\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    const subView = renderer(props);\n\n    if (subView == null) {\n      return null;\n    }\n\n    const pointerEvents = offset !== 0 || isStale ? 'none' : 'box-none';\n\n    return (\n      <Animated.View\n        pointerEvents={pointerEvents}\n        key={`${name}_${key}`}\n        style={[\n          styles.item,\n          styles[name],\n          props.style,\n          styleInterpolator({\n            ...this.props,\n            ...props,\n          }),\n        ]}\n      >\n        {subView}\n      </Animated.View>\n    );\n  };\n\n  private renderHeader = (props: SubviewProps) => {\n    const { options } = props.scene.descriptor;\n    if (options.header === null) {\n      return null;\n    }\n    const left = this.renderLeft(props);\n    const right = this.renderRight(props);\n    const title = this.renderTitle(props, {\n      hasLeftComponent: !!left,\n      hasRightComponent: !!right,\n      headerTitleContainerStyle: options.headerTitleContainerStyle,\n    });\n\n    const { transitionPreset } = this.props;\n\n    const wrapperProps = {\n      style: styles.header,\n      key: `scene_${props.scene.key}`,\n    };\n\n    if (\n      options.headerLeft ||\n      options.headerBackImage ||\n      Platform.OS !== 'ios' ||\n      transitionPreset !== 'uikit'\n    ) {\n      return (\n        <View {...wrapperProps}>\n          {title}\n          {left}\n          {right}\n        </View>\n      );\n    } else {\n      return (\n        <MaskedViewIOS\n          {...wrapperProps}\n          maskElement={\n            <View style={styles.iconMaskContainer}>\n              <Image\n                source={require('../assets/back-icon-mask.png')}\n                style={styles.iconMask}\n              />\n              <View style={styles.iconMaskFillerRect} />\n            </View>\n          }\n        >\n          {title}\n          {left}\n          {right}\n        </MaskedViewIOS>\n      );\n    }\n  };\n\n  render() {\n    let appBar;\n    let background;\n    const { mode, scene, isLandscape } = this.props;\n\n    if (mode === 'float') {\n      const scenesByIndex: { [key: string]: Scene } = {};\n      this.props.scenes.forEach(scene => {\n        scenesByIndex[scene.index] = scene;\n      });\n      const scenesProps = Object.values(scenesByIndex).map(scene => ({\n        position: this.props.position,\n        scene,\n      }));\n      appBar = scenesProps.map(props => this.renderHeader(props));\n      background = scenesProps.map(props => this.renderBackground(props));\n    } else {\n      const headerProps = {\n        position: new Animated.Value(this.props.scene.index),\n        scene: this.props.scene,\n      };\n\n      appBar = this.renderHeader(headerProps);\n      background = this.renderBackground(headerProps);\n    }\n\n    const { options } = scene.descriptor;\n    const { headerStyle = {} } = options;\n    const headerStyleObj = StyleSheet.flatten(headerStyle) as ViewStyle;\n    const appBarHeight = getAppBarHeight(isLandscape);\n\n    const {\n      alignItems,\n      justifyContent,\n      flex,\n      flexDirection,\n      flexGrow,\n      flexShrink,\n      flexBasis,\n      flexWrap,\n      position,\n      padding,\n      paddingHorizontal,\n      paddingRight,\n      paddingLeft,\n      // paddingVertical,\n      // paddingTop,\n      // paddingBottom,\n      top,\n      right,\n      bottom,\n      left,\n      ...safeHeaderStyle\n    } = headerStyleObj;\n\n    if (__DEV__) {\n      warnIfHeaderStyleDefined(alignItems, 'alignItems');\n      warnIfHeaderStyleDefined(justifyContent, 'justifyContent');\n      warnIfHeaderStyleDefined(flex, 'flex');\n      warnIfHeaderStyleDefined(flexDirection, 'flexDirection');\n      warnIfHeaderStyleDefined(flexGrow, 'flexGrow');\n      warnIfHeaderStyleDefined(flexShrink, 'flexShrink');\n      warnIfHeaderStyleDefined(flexBasis, 'flexBasis');\n      warnIfHeaderStyleDefined(flexWrap, 'flexWrap');\n      warnIfHeaderStyleDefined(padding, 'padding');\n      warnIfHeaderStyleDefined(position, 'position');\n      warnIfHeaderStyleDefined(paddingHorizontal, 'paddingHorizontal');\n      warnIfHeaderStyleDefined(paddingRight, 'paddingRight');\n      warnIfHeaderStyleDefined(paddingLeft, 'paddingLeft');\n      // warnIfHeaderStyleDefined(paddingVertical, 'paddingVertical');\n      // warnIfHeaderStyleDefined(paddingTop, 'paddingTop');\n      // warnIfHeaderStyleDefined(paddingBottom, 'paddingBottom');\n      warnIfHeaderStyleDefined(top, 'top');\n      warnIfHeaderStyleDefined(right, 'right');\n      warnIfHeaderStyleDefined(bottom, 'bottom');\n      warnIfHeaderStyleDefined(left, 'left');\n    }\n\n    // TODO: warn if any unsafe styles are provided\n    const containerStyles = [\n      options.headerTransparent\n        ? styles.transparentContainer\n        : styles.container,\n      { height: appBarHeight },\n      safeHeaderStyle,\n    ];\n\n    const { headerForceInset } = options;\n    const forceInset = headerForceInset || {\n      top: 'always',\n      bottom: 'never',\n      horizontal: 'always',\n    };\n\n    return (\n      <Animated.View\n        style={[\n          this.props.layoutInterpolator(this.props),\n          Platform.OS === 'ios' && !options.headerTransparent\n            ? {\n                backgroundColor:\n                  safeHeaderStyle.backgroundColor || DEFAULT_BACKGROUND_COLOR,\n              }\n            : null,\n        ]}\n      >\n        <SafeAreaView forceInset={forceInset} style={containerStyles}>\n          {background}\n          <View style={styles.flexOne}>{appBar}</View>\n        </SafeAreaView>\n      </Animated.View>\n    );\n  }\n}\n\nfunction warnIfHeaderStyleDefined(value: any, styleProp: string) {\n  if (styleProp === 'position' && value === 'absolute') {\n    console.warn(\n      \"position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the headerTransparent navigationOption.\"\n    );\n  } else if (value !== undefined) {\n    console.warn(\n      `${styleProp} was given a value of ${value}, this has no effect on headerStyle.`\n    );\n  }\n}\n\nconst platformContainerStyles = Platform.select({\n  android: {\n    elevation: 4,\n  },\n  ios: {\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: '#A7A7AA',\n  },\n  default: {\n    // https://github.com/necolas/react-native-web/issues/44\n    // Material Design\n    boxShadow: `0 2px 4px -1px rgba(0,0,0,0.2), 0 4px 5px 0 rgba(0,0,0,0.14), 0 1px 10px 0 rgba(0,0,0,0.12)`,\n  },\n});\n\nconst DEFAULT_BACKGROUND_COLOR = '#FFF';\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: DEFAULT_BACKGROUND_COLOR,\n    ...platformContainerStyles,\n  },\n  transparentContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    ...platformContainerStyles,\n    borderBottomWidth: 0,\n    borderBottomColor: 'transparent',\n    elevation: 0,\n  },\n  header: {\n    ...StyleSheet.absoluteFillObject,\n    flexDirection: 'row',\n  },\n  item: {\n    backgroundColor: 'transparent',\n  },\n  iconMaskContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  iconMaskFillerRect: {\n    flex: 1,\n    backgroundColor: '#d8d8d8',\n    marginLeft: -5,\n  },\n  iconMask: {\n    // These are mostly the same as the icon in ModularHeaderBackButton\n    height: 23,\n    width: 14.5,\n    marginLeft: 8.5,\n    marginTop: -2.5,\n    alignSelf: 'center',\n    resizeMode: 'contain',\n    transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  background: {},\n  // eslint-disable-next-line react-native/no-unused-styles\n  title: {\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  left: {\n    left: 0,\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  right: {\n    right: 0,\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  flexOne: {\n    flex: 1,\n  },\n});\n\nexport default withOrientation(Header);\n"]},"metadata":{},"sourceType":"module"}