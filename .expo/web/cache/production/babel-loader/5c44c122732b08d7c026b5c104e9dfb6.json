{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import PropTypes from'prop-types';import Animated from\"react-native-web/dist/exports/Animated\";import NativeModules from\"react-native-web/dist/exports/NativeModules\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Platform from\"react-native-web/dist/exports/Platform\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import TouchableItem from\"./TouchableItem\";import{SceneRendererPropType}from\"./PropTypes\";var useNativeDriver=Boolean(NativeModules.NativeAnimatedModule);var TabBar=function(_React$Component){_inherits(TabBar,_React$Component);function TabBar(_props){var _this;_classCallCheck(this,TabBar);_this=_possibleConstructorReturn(this,_getPrototypeOf(TabBar).call(this,_props));_this._isIntial=true;_this._isManualScroll=false;_this._isMomentumScroll=false;_this._startTrackingPosition=function(){_this._offsetXListener=_this.props.offsetX.addListener(function(_ref){var value=_ref.value;_this._lastOffsetX=value;_this._handlePosition();});_this._panXListener=_this.props.panX.addListener(function(_ref2){var value=_ref2.value;_this._lastPanX=value;_this._handlePosition();});};_this._stopTrackingPosition=function(){_this.props.offsetX.removeListener(_this._offsetXListener);_this.props.panX.removeListener(_this._panXListener);};_this._handlePosition=function(){var _this$props=_this.props,navigationState=_this$props.navigationState,layout=_this$props.layout;if(layout.width===0){return;}var panX=typeof _this._lastPanX==='number'?_this._lastPanX:0;var offsetX=typeof _this._lastOffsetX==='number'?_this._lastOffsetX:-navigationState.index*layout.width;var value=(panX+offsetX)/-(layout.width||0.001);_this._adjustScroll(value);};_this._renderLabel=function(scene){if(typeof _this.props.renderLabel!=='undefined'){return _this.props.renderLabel(scene);}var label=_this.props.getLabelText(scene);if(typeof label!=='string'){return null;}return React.createElement(Animated.Text,{style:[styles.tabLabel,_this.props.labelStyle]},label);};_this._renderIndicator=function(props){if(typeof _this.props.renderIndicator!=='undefined'){return _this.props.renderIndicator(props);}var width=props.width,position=props.position,navigationState=props.navigationState;var translateX=Animated.multiply(Animated.multiply(position.interpolate({inputRange:[-1,navigationState.routes.length],outputRange:[-1,navigationState.routes.length],extrapolate:'clamp'}),width),I18nManager.isRTL?-1:1);return React.createElement(Animated.View,{style:[styles.indicator,{width:width,transform:[{translateX:translateX}]},_this.props.indicatorStyle]});};_this._getTabWidth=function(props){var layout=props.layout,navigationState=props.navigationState,tabStyle=props.tabStyle;var flattened=StyleSheet.flatten(tabStyle);if(flattened){switch(typeof flattened.width){case'number':return flattened.width;case'string':if(flattened.width.endsWith('%')){var width=parseFloat(flattened.width);if(Number.isFinite(width)){return layout.width*(width/100);}}}}if(props.scrollEnabled){return layout.width/5*2;}return layout.width/navigationState.routes.length;};_this._handleTabPress=function(_ref3){var route=_ref3.route;_this._pendingIndex=_this.props.navigationState.routes.indexOf(route);if(_this.props.onTabPress){_this.props.onTabPress({route:route});}_this.props.jumpTo(route.key);};_this._handleTabLongPress=function(_ref4){var route=_ref4.route;if(_this.props.onTabLongPress){_this.props.onTabLongPress({route:route});}};_this._normalizeScrollValue=function(props,value){var layout=props.layout,navigationState=props.navigationState;var tabWidth=_this._getTabWidth(props);var tabBarWidth=Math.max(tabWidth*navigationState.routes.length,layout.width);var maxDistance=tabBarWidth-layout.width;return Math.max(Math.min(value,maxDistance),0);};_this._getScrollAmount=function(props,i){var layout=props.layout;var tabWidth=_this._getTabWidth(props);var centerDistance=tabWidth*(i+1/2);var scrollAmount=centerDistance-layout.width/2;return _this._normalizeScrollValue(props,scrollAmount);};_this._adjustScroll=function(value){if(_this.props.scrollEnabled){global.cancelAnimationFrame(_this._scrollResetCallback);_this._scrollView&&_this._scrollView.scrollTo({x:_this._normalizeScrollValue(_this.props,_this._getScrollAmount(_this.props,value)),animated:!_this._isIntial});_this._isIntial=false;}};_this._resetScroll=function(value){var animated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(_this.props.scrollEnabled){global.cancelAnimationFrame(_this._scrollResetCallback);_this._scrollResetCallback=global.requestAnimationFrame(function(){_this._scrollView&&_this._scrollView.scrollTo({x:_this._getScrollAmount(_this.props,value),animated:animated});});}};_this._handleBeginDrag=function(){_this._isManualScroll=true;_this._isMomentumScroll=false;};_this._handleEndDrag=function(){global.requestAnimationFrame(function(){if(_this._isMomentumScroll){return;}_this._isManualScroll=false;});};_this._handleMomentumScrollBegin=function(){_this._isMomentumScroll=true;};_this._handleMomentumScrollEnd=function(){_this._isMomentumScroll=false;_this._isManualScroll=false;};var initialVisibility=1;if(_this.props.scrollEnabled){var tabWidth=_this._getTabWidth(_this.props);if(!tabWidth){initialVisibility=0;}}var initialOffset=_this.props.scrollEnabled&&_this.props.layout.width?{x:_this._getScrollAmount(_this.props,_this.props.navigationState.index),y:0}:undefined;_this.state={visibility:new Animated.Value(initialVisibility),scrollAmount:new Animated.Value(0),initialOffset:initialOffset};return _this;}_createClass(TabBar,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.scrollEnabled&&this._startTrackingPosition();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevTabWidth=this._getTabWidth(prevProps);var currentTabWidth=this._getTabWidth(this.props);var pendingIndex=typeof this._pendingIndex==='number'?this._pendingIndex:this.props.navigationState.index;this._pendingIndex=null;if(prevTabWidth!==currentTabWidth&&currentTabWidth){this.state.visibility.setValue(1);}if(prevProps.navigationState.routes.length!==this.props.navigationState.routes.length||prevProps.layout.width!==this.props.layout.width){this._resetScroll(this.props.navigationState.index,false);}else if(prevProps.navigationState.index!==pendingIndex){this._resetScroll(this.props.navigationState.index);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._stopTrackingPosition();}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,position=_this$props2.position,navigationState=_this$props2.navigationState,scrollEnabled=_this$props2.scrollEnabled,bounces=_this$props2.bounces;var routes=navigationState.routes;var tabWidth=this._getTabWidth(this.props);var tabBarWidth=tabWidth*routes.length;var inputRange=[-1].concat(_toConsumableArray(routes.map(function(x,i){return i;})));var translateX=Animated.multiply(this.state.scrollAmount,-1);return React.createElement(Animated.View,{style:[styles.tabBar,this.props.style]},React.createElement(Animated.View,{pointerEvents:\"none\",style:[styles.indicatorContainer,scrollEnabled?{width:tabBarWidth,transform:[{translateX:translateX}]}:null]},this._renderIndicator(_objectSpread({},this.props,{width:tabWidth}))),React.createElement(View,{style:styles.scroll},React.createElement(Animated.ScrollView,{horizontal:true,keyboardShouldPersistTaps:\"handled\",scrollEnabled:scrollEnabled,bounces:bounces,alwaysBounceHorizontal:false,scrollsToTop:false,showsHorizontalScrollIndicator:false,automaticallyAdjustContentInsets:false,overScrollMode:\"never\",contentContainerStyle:[styles.tabContent,scrollEnabled?null:styles.container],scrollEventThrottle:1,onScroll:Animated.event([{nativeEvent:{contentOffset:{x:this.state.scrollAmount}}}],{useNativeDriver:useNativeDriver}),onScrollBeginDrag:this._handleBeginDrag,onScrollEndDrag:this._handleEndDrag,onMomentumScrollBegin:this._handleMomentumScrollBegin,onMomentumScrollEnd:this._handleMomentumScrollEnd,contentOffset:this.state.initialOffset,ref:function ref(el){return _this2._scrollView=el&&el.getNode();}},routes.map(function(route,i){var outputRange=inputRange.map(function(inputIndex){return inputIndex===i?1:0.7;});var opacity=Animated.multiply(_this2.state.visibility,position.interpolate({inputRange:inputRange,outputRange:outputRange}));var label=_this2._renderLabel({route:route});var icon=_this2.props.renderIcon?_this2.props.renderIcon({route:route}):null;var badge=_this2.props.renderBadge?_this2.props.renderBadge({route:route}):null;var tabStyle={};tabStyle.opacity=opacity;if(icon){if(label){tabStyle.paddingTop=8;}else{tabStyle.padding=12;}}var passedTabStyle=StyleSheet.flatten(_this2.props.tabStyle);var isWidthSet=passedTabStyle&&typeof passedTabStyle.width!=='undefined'||scrollEnabled===true;var tabContainerStyle={};if(isWidthSet){tabStyle.width=tabWidth;}if(passedTabStyle&&typeof passedTabStyle.flex==='number'){tabContainerStyle.flex=passedTabStyle.flex;}else if(!isWidthSet){tabContainerStyle.flex=1;}var accessibilityLabel=_this2.props.getAccessibilityLabel({route:route});accessibilityLabel=typeof accessibilityLabel!=='undefined'?accessibilityLabel:_this2.props.getLabelText({route:route});var isFocused=i===navigationState.index;return React.createElement(TouchableItem,{borderless:true,key:route.key,testID:_this2.props.getTestID({route:route}),accessible:_this2.props.getAccessible({route:route}),accessibilityLabel:accessibilityLabel,accessibilityTraits:isFocused?['button','selected']:'button',accessibilityComponentType:\"button\",accessibilityRole:\"button\",accessibilityStates:isFocused?['selected']:[],pressColor:_this2.props.pressColor,pressOpacity:_this2.props.pressOpacity,delayPressIn:0,onPress:function onPress(){return _this2._handleTabPress({route:route});},onLongPress:function onLongPress(){return _this2._handleTabLongPress({route:route});},style:tabContainerStyle},React.createElement(View,{pointerEvents:\"none\",style:styles.container},React.createElement(Animated.View,{style:[styles.tabItem,tabStyle,passedTabStyle,styles.container]},icon,label),badge?React.createElement(Animated.View,{style:[styles.badge,{opacity:_this2.state.visibility}]},badge):null));}))));}}]);return TabBar;}(React.Component);TabBar.propTypes=_objectSpread({},SceneRendererPropType,{scrollEnabled:PropTypes.bool,bounces:PropTypes.bool,pressColor:TouchableItem.propTypes.pressColor,pressOpacity:TouchableItem.propTypes.pressOpacity,getLabelText:PropTypes.func,getAccessible:PropTypes.func,getAccessibilityLabel:PropTypes.func,getTestID:PropTypes.func,renderIcon:PropTypes.func,renderLabel:PropTypes.func,renderIndicator:PropTypes.func,onTabPress:PropTypes.func,onTabLongPress:PropTypes.func,labelStyle:PropTypes.any,style:PropTypes.any});TabBar.defaultProps={getLabelText:function getLabelText(_ref5){var route=_ref5.route;return typeof route.title==='string'?route.title.toUpperCase():route.title;},getAccessible:function getAccessible(_ref6){var route=_ref6.route;return typeof route.accessible!=='undefined'?route.accessible:true;},getAccessibilityLabel:function getAccessibilityLabel(_ref7){var route=_ref7.route;return route.accessibilityLabel;},getTestID:function getTestID(_ref8){var route=_ref8.route;return route.testID;}};export{TabBar as default};var styles=StyleSheet.create({container:{flex:1},scroll:{overflow:Platform.OS==='web'?'auto':'scroll'},tabBar:{backgroundColor:'#2196f3',elevation:4,shadowColor:'black',shadowOpacity:0.1,shadowRadius:StyleSheet.hairlineWidth,shadowOffset:{height:StyleSheet.hairlineWidth},zIndex:Platform.OS==='android'?0:1},tabContent:{flexDirection:'row',flexWrap:'nowrap'},tabLabel:{backgroundColor:'transparent',color:'white',margin:8},tabItem:{flex:1,padding:8,alignItems:'center',justifyContent:'center'},badge:{position:'absolute',top:0,right:0},indicatorContainer:{position:'absolute',top:0,left:0,right:0,bottom:0},indicator:{backgroundColor:'#ffeb3b',position:'absolute',left:0,bottom:0,right:0,height:2}});","map":{"version":3,"sources":["/Users/yuvalbeiser/Downloads/codecanyon-B1UUUVLW-harrier-react-native-ecommerce-ui-kit-template/eCommerce2/node_modules/react-native-tab-view/src/TabBar.js"],"names":["React","PropTypes","TouchableItem","SceneRendererPropType","useNativeDriver","Boolean","NativeModules","NativeAnimatedModule","TabBar","props","_isIntial","_isManualScroll","_isMomentumScroll","_startTrackingPosition","_offsetXListener","offsetX","addListener","value","_lastOffsetX","_handlePosition","_panXListener","panX","_lastPanX","_stopTrackingPosition","removeListener","navigationState","layout","width","index","_adjustScroll","_renderLabel","scene","renderLabel","label","getLabelText","styles","tabLabel","labelStyle","_renderIndicator","renderIndicator","position","translateX","Animated","multiply","interpolate","inputRange","routes","length","outputRange","extrapolate","I18nManager","isRTL","indicator","transform","indicatorStyle","_getTabWidth","tabStyle","flattened","StyleSheet","flatten","endsWith","parseFloat","Number","isFinite","scrollEnabled","_handleTabPress","route","_pendingIndex","indexOf","onTabPress","jumpTo","key","_handleTabLongPress","onTabLongPress","_normalizeScrollValue","tabWidth","tabBarWidth","Math","max","maxDistance","min","_getScrollAmount","i","centerDistance","scrollAmount","global","cancelAnimationFrame","_scrollResetCallback","_scrollView","scrollTo","x","animated","_resetScroll","requestAnimationFrame","_handleBeginDrag","_handleEndDrag","_handleMomentumScrollBegin","_handleMomentumScrollEnd","initialVisibility","initialOffset","y","undefined","state","visibility","Value","prevProps","prevTabWidth","currentTabWidth","pendingIndex","setValue","bounces","map","tabBar","style","indicatorContainer","scroll","tabContent","container","event","nativeEvent","contentOffset","el","getNode","inputIndex","opacity","icon","renderIcon","badge","renderBadge","paddingTop","padding","passedTabStyle","isWidthSet","tabContainerStyle","flex","accessibilityLabel","getAccessibilityLabel","isFocused","getTestID","getAccessible","pressColor","pressOpacity","tabItem","Component","propTypes","bool","func","any","defaultProps","title","toUpperCase","accessible","testID","create","overflow","Platform","OS","backgroundColor","elevation","shadowColor","shadowOpacity","shadowRadius","hairlineWidth","shadowOffset","height","zIndex","flexDirection","flexWrap","color","margin","alignItems","justifyContent","top","right","left","bottom"],"mappings":"2vCAEA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,C,2bAUA,MAAOC,CAAAA,aAAP,uBACA,OAASC,qBAAT,mBAsCA,GAAMC,CAAAA,eAAe,CAAGC,OAAO,CAACC,aAAa,CAACC,oBAAf,CAA/B,C,GAEqBC,CAAAA,M,+DA6BnB,gBAAYC,MAAZ,CAA6B,wCAC3B,wEAAMA,MAAN,GAD2B,MAgE7BC,SAhE6B,CAgER,IAhEQ,OAiE7BC,eAjE6B,CAiEF,KAjEE,OAkE7BC,iBAlE6B,CAkEA,KAlEA,OA0E7BC,sBA1E6B,CA0EJ,UAAM,CAC7B,MAAKC,gBAAL,CAAwB,MAAKL,KAAL,CAAWM,OAAX,CAAmBC,WAAnB,CAA+B,cAAe,IAAZC,CAAAA,KAAY,MAAZA,KAAY,CACpE,MAAKC,YAAL,CAAoBD,KAApB,CACA,MAAKE,eAAL,GACD,CAHuB,CAAxB,CAIA,MAAKC,aAAL,CAAqB,MAAKX,KAAL,CAAWY,IAAX,CAAgBL,WAAhB,CAA4B,eAAe,IAAZC,CAAAA,KAAY,OAAZA,KAAY,CAC9D,MAAKK,SAAL,CAAiBL,KAAjB,CACA,MAAKE,eAAL,GACD,CAHoB,CAArB,CAID,CAnF4B,OAqF7BI,qBArF6B,CAqFL,UAAM,CAC5B,MAAKd,KAAL,CAAWM,OAAX,CAAmBS,cAAnB,CAAkC,MAAKV,gBAAvC,EACA,MAAKL,KAAL,CAAWY,IAAX,CAAgBG,cAAhB,CAA+B,MAAKJ,aAApC,EACD,CAxF4B,OA0F7BD,eA1F6B,CA0FX,UAAM,iBACc,MAAKV,KADnB,CACdgB,eADc,aACdA,eADc,CACGC,MADH,aACGA,MADH,CAGtB,GAAIA,MAAM,CAACC,KAAP,GAAiB,CAArB,CAAwB,CAEtB,OACD,CAED,GAAMN,CAAAA,IAAI,CAAG,MAAO,OAAKC,SAAZ,GAA0B,QAA1B,CAAqC,MAAKA,SAA1C,CAAsD,CAAnE,CACA,GAAMP,CAAAA,OAAO,CACX,MAAO,OAAKG,YAAZ,GAA6B,QAA7B,CACI,MAAKA,YADT,CAEI,CAACO,eAAe,CAACG,KAAjB,CAAyBF,MAAM,CAACC,KAHtC,CAKA,GAAMV,CAAAA,KAAK,CAAG,CAACI,IAAI,CAAGN,OAAR,EAAmB,EAAEW,MAAM,CAACC,KAAP,EAAgB,KAAlB,CAAjC,CAEA,MAAKE,aAAL,CAAmBZ,KAAnB,EACD,CA3G4B,OA6G7Ba,YA7G6B,CA6Gd,SAACC,KAAD,CAAqB,CAClC,GAAI,MAAO,OAAKtB,KAAL,CAAWuB,WAAlB,GAAkC,WAAtC,CAAmD,CACjD,MAAO,OAAKvB,KAAL,CAAWuB,WAAX,CAAuBD,KAAvB,CAAP,CACD,CACD,GAAME,CAAAA,KAAK,CAAG,MAAKxB,KAAL,CAAWyB,YAAX,CAAwBH,KAAxB,CAAd,CACA,GAAI,MAAOE,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CAC7B,MAAO,KAAP,CACD,CACD,MACE,qBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAACE,MAAM,CAACC,QAAR,CAAkB,MAAK3B,KAAL,CAAW4B,UAA7B,CAAtB,EACGJ,KADH,CADF,CAKD,CA1H4B,OA4H7BK,gBA5H6B,CA4HV,SAAC7B,KAAD,CAA8B,CAC/C,GAAI,MAAO,OAAKA,KAAL,CAAW8B,eAAlB,GAAsC,WAA1C,CAAuD,CACrD,MAAO,OAAK9B,KAAL,CAAW8B,eAAX,CAA2B9B,KAA3B,CAAP,CACD,CAH8C,GAIvCkB,CAAAA,KAJuC,CAIFlB,KAJE,CAIvCkB,KAJuC,CAIhCa,QAJgC,CAIF/B,KAJE,CAIhC+B,QAJgC,CAItBf,eAJsB,CAIFhB,KAJE,CAItBgB,eAJsB,CAK/C,GAAMgB,CAAAA,UAAU,CAAGC,QAAQ,CAACC,QAAT,CACjBD,QAAQ,CAACC,QAAT,CACEH,QAAQ,CAACI,WAAT,CAAqB,CACnBC,UAAU,CAAE,CAAC,CAAC,CAAF,CAAKpB,eAAe,CAACqB,MAAhB,CAAuBC,MAA5B,CADO,CAEnBC,WAAW,CAAE,CAAC,CAAC,CAAF,CAAKvB,eAAe,CAACqB,MAAhB,CAAuBC,MAA5B,CAFM,CAGnBE,WAAW,CAAE,OAHM,CAArB,CADF,CAMEtB,KANF,CADiB,CASjBuB,WAAW,CAACC,KAAZ,CAAoB,CAAC,CAArB,CAAyB,CATR,CAAnB,CAWA,MACE,qBAAC,QAAD,CAAU,IAAV,EACE,KAAK,CAAE,CACLhB,MAAM,CAACiB,SADF,CAEL,CAAEzB,KAAK,CAALA,KAAF,CAAS0B,SAAS,CAAE,CAAC,CAAEZ,UAAU,CAAVA,UAAF,CAAD,CAApB,CAFK,CAGL,MAAKhC,KAAL,CAAW6C,cAHN,CADT,EADF,CASD,CArJ4B,OAuJ7BC,YAvJ6B,CAuJd,SAAA9C,KAAK,CAAI,IACdiB,CAAAA,MADc,CACwBjB,KADxB,CACdiB,MADc,CACND,eADM,CACwBhB,KADxB,CACNgB,eADM,CACW+B,QADX,CACwB/C,KADxB,CACW+C,QADX,CAEtB,GAAMC,CAAAA,SAAS,CAAGC,UAAU,CAACC,OAAX,CAAmBH,QAAnB,CAAlB,CAEA,GAAIC,SAAJ,CAAe,CACb,OAAQ,MAAOA,CAAAA,SAAS,CAAC9B,KAAzB,EACE,IAAK,QAAL,CACE,MAAO8B,CAAAA,SAAS,CAAC9B,KAAjB,CACF,IAAK,QAAL,CACE,GAAI8B,SAAS,CAAC9B,KAAV,CAAgBiC,QAAhB,CAAyB,GAAzB,CAAJ,CAAmC,CACjC,GAAMjC,CAAAA,KAAK,CAAGkC,UAAU,CAACJ,SAAS,CAAC9B,KAAX,CAAxB,CACA,GAAImC,MAAM,CAACC,QAAP,CAAgBpC,KAAhB,CAAJ,CAA4B,CAC1B,MAAOD,CAAAA,MAAM,CAACC,KAAP,EAAgBA,KAAK,CAAG,GAAxB,CAAP,CACD,CACF,CATL,CAWD,CAED,GAAIlB,KAAK,CAACuD,aAAV,CAAyB,CACvB,MAAQtC,CAAAA,MAAM,CAACC,KAAP,CAAe,CAAhB,CAAqB,CAA5B,CACD,CAED,MAAOD,CAAAA,MAAM,CAACC,KAAP,CAAeF,eAAe,CAACqB,MAAhB,CAAuBC,MAA7C,CACD,CA9K4B,OAgL7BkB,eAhL6B,CAgLX,eAAyB,IAAtBC,CAAAA,KAAsB,OAAtBA,KAAsB,CACzC,MAAKC,aAAL,CAAqB,MAAK1D,KAAL,CAAWgB,eAAX,CAA2BqB,MAA3B,CAAkCsB,OAAlC,CAA0CF,KAA1C,CAArB,CAEA,GAAI,MAAKzD,KAAL,CAAW4D,UAAf,CAA2B,CACzB,MAAK5D,KAAL,CAAW4D,UAAX,CAAsB,CAAEH,KAAK,CAALA,KAAF,CAAtB,EACD,CAED,MAAKzD,KAAL,CAAW6D,MAAX,CAAkBJ,KAAK,CAACK,GAAxB,EACD,CAxL4B,OA0L7BC,mBA1L6B,CA0LP,eAAyB,IAAtBN,CAAAA,KAAsB,OAAtBA,KAAsB,CAC7C,GAAI,MAAKzD,KAAL,CAAWgE,cAAf,CAA+B,CAC7B,MAAKhE,KAAL,CAAWgE,cAAX,CAA0B,CAAEP,KAAK,CAALA,KAAF,CAA1B,EACD,CACF,CA9L4B,OAgM7BQ,qBAhM6B,CAgML,SAACjE,KAAD,CAAQQ,KAAR,CAAkB,IAChCS,CAAAA,MADgC,CACJjB,KADI,CAChCiB,MADgC,CACxBD,eADwB,CACJhB,KADI,CACxBgB,eADwB,CAExC,GAAMkD,CAAAA,QAAQ,CAAG,MAAKpB,YAAL,CAAkB9C,KAAlB,CAAjB,CACA,GAAMmE,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,CAClBH,QAAQ,CAAGlD,eAAe,CAACqB,MAAhB,CAAuBC,MADhB,CAElBrB,MAAM,CAACC,KAFW,CAApB,CAIA,GAAMoD,CAAAA,WAAW,CAAGH,WAAW,CAAGlD,MAAM,CAACC,KAAzC,CAEA,MAAOkD,CAAAA,IAAI,CAACC,GAAL,CAASD,IAAI,CAACG,GAAL,CAAS/D,KAAT,CAAgB8D,WAAhB,CAAT,CAAuC,CAAvC,CAAP,CACD,CA1M4B,OA4M7BE,gBA5M6B,CA4MV,SAACxE,KAAD,CAAQyE,CAAR,CAAc,IACvBxD,CAAAA,MADuB,CACZjB,KADY,CACvBiB,MADuB,CAE/B,GAAMiD,CAAAA,QAAQ,CAAG,MAAKpB,YAAL,CAAkB9C,KAAlB,CAAjB,CACA,GAAM0E,CAAAA,cAAc,CAAGR,QAAQ,EAAIO,CAAC,CAAG,EAAI,CAAZ,CAA/B,CACA,GAAME,CAAAA,YAAY,CAAGD,cAAc,CAAGzD,MAAM,CAACC,KAAP,CAAe,CAArD,CAEA,MAAO,OAAK+C,qBAAL,CAA2BjE,KAA3B,CAAkC2E,YAAlC,CAAP,CACD,CAnN4B,OAqN7BvD,aArN6B,CAqNb,SAACZ,KAAD,CAAmB,CACjC,GAAI,MAAKR,KAAL,CAAWuD,aAAf,CAA8B,CAC5BqB,MAAM,CAACC,oBAAP,CAA4B,MAAKC,oBAAjC,EACA,MAAKC,WAAL,EACE,MAAKA,WAAL,CAAiBC,QAAjB,CAA0B,CACxBC,CAAC,CAAE,MAAKhB,qBAAL,CACD,MAAKjE,KADJ,CAED,MAAKwE,gBAAL,CAAsB,MAAKxE,KAA3B,CAAkCQ,KAAlC,CAFC,CADqB,CAKxB0E,QAAQ,CAAE,CAAC,MAAKjF,SALQ,CAA1B,CADF,CASA,MAAKA,SAAL,CAAiB,KAAjB,CACD,CACF,CAnO4B,OAqO7BkF,YArO6B,CAqOd,SAAC3E,KAAD,CAAoC,IAApB0E,CAAAA,QAAoB,2DAAT,IAAS,CACjD,GAAI,MAAKlF,KAAL,CAAWuD,aAAf,CAA8B,CAC5BqB,MAAM,CAACC,oBAAP,CAA4B,MAAKC,oBAAjC,EACA,MAAKA,oBAAL,CAA4BF,MAAM,CAACQ,qBAAP,CAA6B,UAAM,CAC7D,MAAKL,WAAL,EACE,MAAKA,WAAL,CAAiBC,QAAjB,CAA0B,CACxBC,CAAC,CAAE,MAAKT,gBAAL,CAAsB,MAAKxE,KAA3B,CAAkCQ,KAAlC,CADqB,CAExB0E,QAAQ,CAARA,QAFwB,CAA1B,CADF,CAKD,CAN2B,CAA5B,CAOD,CACF,CAhP4B,OAkP7BG,gBAlP6B,CAkPV,UAAM,CAEvB,MAAKnF,eAAL,CAAuB,IAAvB,CACA,MAAKC,iBAAL,CAAyB,KAAzB,CACD,CAtP4B,OAwP7BmF,cAxP6B,CAwPZ,UAAM,CAIrBV,MAAM,CAACQ,qBAAP,CAA6B,UAAM,CACjC,GAAI,MAAKjF,iBAAT,CAA4B,CAC1B,OACD,CACD,MAAKD,eAAL,CAAuB,KAAvB,CACD,CALD,EAMD,CAlQ4B,OAoQ7BqF,0BApQ6B,CAoQA,UAAM,CAEjC,MAAKpF,iBAAL,CAAyB,IAAzB,CACD,CAvQ4B,OAyQ7BqF,wBAzQ6B,CAyQF,UAAM,CAE/B,MAAKrF,iBAAL,CAAyB,KAAzB,CACA,MAAKD,eAAL,CAAuB,KAAvB,CACD,CA7Q4B,CAG3B,GAAIuF,CAAAA,iBAAiB,CAAG,CAAxB,CAEA,GAAI,MAAKzF,KAAL,CAAWuD,aAAf,CAA8B,CAC5B,GAAMW,CAAAA,QAAQ,CAAG,MAAKpB,YAAL,CAAkB,MAAK9C,KAAvB,CAAjB,CACA,GAAI,CAACkE,QAAL,CAAe,CACbuB,iBAAiB,CAAG,CAApB,CACD,CACF,CAED,GAAMC,CAAAA,aAAa,CACjB,MAAK1F,KAAL,CAAWuD,aAAX,EAA4B,MAAKvD,KAAL,CAAWiB,MAAX,CAAkBC,KAA9C,CACI,CACE+D,CAAC,CAAE,MAAKT,gBAAL,CACD,MAAKxE,KADJ,CAED,MAAKA,KAAL,CAAWgB,eAAX,CAA2BG,KAF1B,CADL,CAKEwE,CAAC,CAAE,CALL,CADJ,CAQIC,SATN,CAWA,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,GAAI7D,CAAAA,QAAQ,CAAC8D,KAAb,CAAmBN,iBAAnB,CADD,CAEXd,YAAY,CAAE,GAAI1C,CAAAA,QAAQ,CAAC8D,KAAb,CAAmB,CAAnB,CAFH,CAGXL,aAAa,CAAbA,aAHW,CAAb,CAvB2B,aA4B5B,C,gFAEmB,CAClB,KAAK1F,KAAL,CAAWuD,aAAX,EAA4B,KAAKnD,sBAAL,EAA5B,CACD,C,8DAEkB4F,S,CAAqB,CACtC,GAAMC,CAAAA,YAAY,CAAG,KAAKnD,YAAL,CAAkBkD,SAAlB,CAArB,CACA,GAAME,CAAAA,eAAe,CAAG,KAAKpD,YAAL,CAAkB,KAAK9C,KAAvB,CAAxB,CACA,GAAMmG,CAAAA,YAAY,CAChB,MAAO,MAAKzC,aAAZ,GAA8B,QAA9B,CACI,KAAKA,aADT,CAEI,KAAK1D,KAAL,CAAWgB,eAAX,CAA2BG,KAHjC,CAKA,KAAKuC,aAAL,CAAqB,IAArB,CAEA,GAAIuC,YAAY,GAAKC,eAAjB,EAAoCA,eAAxC,CAAyD,CACvD,KAAKL,KAAL,CAAWC,UAAX,CAAsBM,QAAtB,CAA+B,CAA/B,EACD,CAED,GACEJ,SAAS,CAAChF,eAAV,CAA0BqB,MAA1B,CAAiCC,MAAjC,GACE,KAAKtC,KAAL,CAAWgB,eAAX,CAA2BqB,MAA3B,CAAkCC,MADpC,EAEA0D,SAAS,CAAC/E,MAAV,CAAiBC,KAAjB,GAA2B,KAAKlB,KAAL,CAAWiB,MAAX,CAAkBC,KAH/C,CAIE,CACA,KAAKiE,YAAL,CAAkB,KAAKnF,KAAL,CAAWgB,eAAX,CAA2BG,KAA7C,CAAoD,KAApD,EACD,CAND,IAMO,IAAI6E,SAAS,CAAChF,eAAV,CAA0BG,KAA1B,GAAoCgF,YAAxC,CAAsD,CAC3D,KAAKhB,YAAL,CAAkB,KAAKnF,KAAL,CAAWgB,eAAX,CAA2BG,KAA7C,EACD,CACF,C,mEAEsB,CACrB,KAAKL,qBAAL,GACD,C,uCAkNQ,kCACuD,KAAKd,KAD5D,CACC+B,QADD,cACCA,QADD,CACWf,eADX,cACWA,eADX,CAC4BuC,aAD5B,cAC4BA,aAD5B,CAC2C8C,OAD3C,cAC2CA,OAD3C,IAEChE,CAAAA,MAFD,CAEYrB,eAFZ,CAECqB,MAFD,CAGP,GAAM6B,CAAAA,QAAQ,CAAG,KAAKpB,YAAL,CAAkB,KAAK9C,KAAvB,CAAjB,CACA,GAAMmE,CAAAA,WAAW,CAAGD,QAAQ,CAAG7B,MAAM,CAACC,MAAtC,CAGA,GAAMF,CAAAA,UAAU,EAAI,CAAC,CAAL,4BAAWC,MAAM,CAACiE,GAAP,CAAW,SAACrB,CAAD,CAAIR,CAAJ,QAAUA,CAAAA,CAAV,EAAX,CAAX,EAAhB,CACA,GAAMzC,CAAAA,UAAU,CAAGC,QAAQ,CAACC,QAAT,CAAkB,KAAK2D,KAAL,CAAWlB,YAA7B,CAA2C,CAAC,CAA5C,CAAnB,CAEA,MACE,qBAAC,QAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAACjD,MAAM,CAAC6E,MAAR,CAAgB,KAAKvG,KAAL,CAAWwG,KAA3B,CAAtB,EACE,oBAAC,QAAD,CAAU,IAAV,EACE,aAAa,CAAC,MADhB,CAEE,KAAK,CAAE,CACL9E,MAAM,CAAC+E,kBADF,CAELlD,aAAa,CACT,CAAErC,KAAK,CAAEiD,WAAT,CAAsBvB,SAAS,CAAE,CAAC,CAAEZ,UAAU,CAAVA,UAAF,CAAD,CAAjC,CADS,CAET,IAJC,CAFT,EASG,KAAKH,gBAAL,kBACI,KAAK7B,KADT,EAECkB,KAAK,CAAEgD,QAFR,GATH,CADF,CAeE,oBAAC,IAAD,EAAM,KAAK,CAAExC,MAAM,CAACgF,MAApB,EACE,oBAAC,QAAD,CAAU,UAAV,EACE,UAAU,KADZ,CAEE,yBAAyB,CAAC,SAF5B,CAGE,aAAa,CAAEnD,aAHjB,CAIE,OAAO,CAAE8C,OAJX,CAKE,sBAAsB,CAAE,KAL1B,CAME,YAAY,CAAE,KANhB,CAOE,8BAA8B,CAAE,KAPlC,CAQE,gCAAgC,CAAE,KARpC,CASE,cAAc,CAAC,OATjB,CAUE,qBAAqB,CAAE,CACrB3E,MAAM,CAACiF,UADc,CAErBpD,aAAa,CAAG,IAAH,CAAU7B,MAAM,CAACkF,SAFT,CAVzB,CAcE,mBAAmB,CAAE,CAdvB,CAeE,QAAQ,CAAE3E,QAAQ,CAAC4E,KAAT,CACR,CACE,CACEC,WAAW,CAAE,CACXC,aAAa,CAAE,CAAE9B,CAAC,CAAE,KAAKY,KAAL,CAAWlB,YAAhB,CADJ,CADf,CADF,CADQ,CAQR,CAAEhF,eAAe,CAAfA,eAAF,CARQ,CAfZ,CAyBE,iBAAiB,CAAE,KAAK0F,gBAzB1B,CA0BE,eAAe,CAAE,KAAKC,cA1BxB,CA2BE,qBAAqB,CAAE,KAAKC,0BA3B9B,CA4BE,mBAAmB,CAAE,KAAKC,wBA5B5B,CA6BE,aAAa,CAAE,KAAKK,KAAL,CAAWH,aA7B5B,CA8BE,GAAG,CAAE,aAAAsB,EAAE,QAAK,CAAA,MAAI,CAACjC,WAAL,CAAmBiC,EAAE,EAAIA,EAAE,CAACC,OAAH,EAA9B,EA9BT,EAgCG5E,MAAM,CAACiE,GAAP,CAAW,SAAC7C,KAAD,CAAQgB,CAAR,CAAc,CACxB,GAAMlC,CAAAA,WAAW,CAAGH,UAAU,CAACkE,GAAX,CAClB,SAAAY,UAAU,QAAKA,CAAAA,UAAU,GAAKzC,CAAf,CAAmB,CAAnB,CAAuB,GAA5B,EADQ,CAApB,CAGA,GAAM0C,CAAAA,OAAO,CAAGlF,QAAQ,CAACC,QAAT,CACd,MAAI,CAAC2D,KAAL,CAAWC,UADG,CAEd/D,QAAQ,CAACI,WAAT,CAAqB,CACnBC,UAAU,CAAVA,UADmB,CAEnBG,WAAW,CAAXA,WAFmB,CAArB,CAFc,CAAhB,CAOA,GAAMf,CAAAA,KAAK,CAAG,MAAI,CAACH,YAAL,CAAkB,CAAEoC,KAAK,CAALA,KAAF,CAAlB,CAAd,CACA,GAAM2D,CAAAA,IAAI,CAAG,MAAI,CAACpH,KAAL,CAAWqH,UAAX,CACT,MAAI,CAACrH,KAAL,CAAWqH,UAAX,CAAsB,CAAE5D,KAAK,CAALA,KAAF,CAAtB,CADS,CAET,IAFJ,CAGA,GAAM6D,CAAAA,KAAK,CAAG,MAAI,CAACtH,KAAL,CAAWuH,WAAX,CACV,MAAI,CAACvH,KAAL,CAAWuH,WAAX,CAAuB,CAAE9D,KAAK,CAALA,KAAF,CAAvB,CADU,CAEV,IAFJ,CAIA,GAAMV,CAAAA,QAAQ,CAAG,EAAjB,CAEAA,QAAQ,CAACoE,OAAT,CAAmBA,OAAnB,CAEA,GAAIC,IAAJ,CAAU,CACR,GAAI5F,KAAJ,CAAW,CACTuB,QAAQ,CAACyE,UAAT,CAAsB,CAAtB,CACD,CAFD,IAEO,CACLzE,QAAQ,CAAC0E,OAAT,CAAmB,EAAnB,CACD,CACF,CAED,GAAMC,CAAAA,cAAc,CAAGzE,UAAU,CAACC,OAAX,CAAmB,MAAI,CAAClD,KAAL,CAAW+C,QAA9B,CAAvB,CACA,GAAM4E,CAAAA,UAAU,CACbD,cAAc,EACb,MAAOA,CAAAA,cAAc,CAACxG,KAAtB,GAAgC,WADlC,EAEAqC,aAAa,GAAK,IAHpB,CAIA,GAAMqE,CAAAA,iBAAiB,CAAG,EAA1B,CAEA,GAAID,UAAJ,CAAgB,CACd5E,QAAQ,CAAC7B,KAAT,CAAiBgD,QAAjB,CACD,CAED,GAAIwD,cAAc,EAAI,MAAOA,CAAAA,cAAc,CAACG,IAAtB,GAA+B,QAArD,CAA+D,CAC7DD,iBAAiB,CAACC,IAAlB,CAAyBH,cAAc,CAACG,IAAxC,CACD,CAFD,IAEO,IAAI,CAACF,UAAL,CAAiB,CACtBC,iBAAiB,CAACC,IAAlB,CAAyB,CAAzB,CACD,CAED,GAAIC,CAAAA,kBAAkB,CAAG,MAAI,CAAC9H,KAAL,CAAW+H,qBAAX,CAAiC,CACxDtE,KAAK,CAALA,KADwD,CAAjC,CAAzB,CAIAqE,kBAAkB,CAChB,MAAOA,CAAAA,kBAAP,GAA8B,WAA9B,CACIA,kBADJ,CAEI,MAAI,CAAC9H,KAAL,CAAWyB,YAAX,CAAwB,CAAEgC,KAAK,CAALA,KAAF,CAAxB,CAHN,CAKA,GAAMuE,CAAAA,SAAS,CAAGvD,CAAC,GAAKzD,eAAe,CAACG,KAAxC,CAEA,MACE,qBAAC,aAAD,EACE,UAAU,KADZ,CAEE,GAAG,CAAEsC,KAAK,CAACK,GAFb,CAGE,MAAM,CAAE,MAAI,CAAC9D,KAAL,CAAWiI,SAAX,CAAqB,CAAExE,KAAK,CAALA,KAAF,CAArB,CAHV,CAIE,UAAU,CAAE,MAAI,CAACzD,KAAL,CAAWkI,aAAX,CAAyB,CAAEzE,KAAK,CAALA,KAAF,CAAzB,CAJd,CAKE,kBAAkB,CAAEqE,kBALtB,CAME,mBAAmB,CACjBE,SAAS,CAAG,CAAC,QAAD,CAAW,UAAX,CAAH,CAA4B,QAPzC,CASE,0BAA0B,CAAC,QAT7B,CAUE,iBAAiB,CAAC,QAVpB,CAWE,mBAAmB,CAAEA,SAAS,CAAG,CAAC,UAAD,CAAH,CAAkB,EAXlD,CAYE,UAAU,CAAE,MAAI,CAAChI,KAAL,CAAWmI,UAZzB,CAaE,YAAY,CAAE,MAAI,CAACnI,KAAL,CAAWoI,YAb3B,CAcE,YAAY,CAAE,CAdhB,CAeE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5E,eAAL,CAAqB,CAAEC,KAAK,CAALA,KAAF,CAArB,CAAN,EAfX,CAgBE,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACM,mBAAL,CAAyB,CAAEN,KAAK,CAALA,KAAF,CAAzB,CAAN,EAhBf,CAiBE,KAAK,CAAEmE,iBAjBT,EAmBE,oBAAC,IAAD,EAAM,aAAa,CAAC,MAApB,CAA2B,KAAK,CAAElG,MAAM,CAACkF,SAAzC,EACE,oBAAC,QAAD,CAAU,IAAV,EACE,KAAK,CAAE,CACLlF,MAAM,CAAC2G,OADF,CAELtF,QAFK,CAGL2E,cAHK,CAILhG,MAAM,CAACkF,SAJF,CADT,EAQGQ,IARH,CASG5F,KATH,CADF,CAYG8F,KAAK,CACJ,oBAAC,QAAD,CAAU,IAAV,EACE,KAAK,CAAE,CACL5F,MAAM,CAAC4F,KADF,CAEL,CAAEH,OAAO,CAAE,MAAI,CAACtB,KAAL,CAAWC,UAAtB,CAFK,CADT,EAMGwB,KANH,CADI,CASF,IArBN,CAnBF,CADF,CA6CD,CAxGA,CAhCH,CADF,CAfF,CADF,CA8JD,C,oBApduC/H,KAAK,CAAC+I,S,EAA3BvI,M,CACZwI,S,kBACF7I,qB,EACH6D,aAAa,CAAE/D,SAAS,CAACgJ,I,CACzBnC,OAAO,CAAE7G,SAAS,CAACgJ,I,CACnBL,UAAU,CAAE1I,aAAa,CAAC8I,SAAd,CAAwBJ,U,CACpCC,YAAY,CAAE3I,aAAa,CAAC8I,SAAd,CAAwBH,Y,CACtC3G,YAAY,CAAEjC,SAAS,CAACiJ,I,CACxBP,aAAa,CAAE1I,SAAS,CAACiJ,I,CACzBV,qBAAqB,CAAEvI,SAAS,CAACiJ,I,CACjCR,SAAS,CAAEzI,SAAS,CAACiJ,I,CACrBpB,UAAU,CAAE7H,SAAS,CAACiJ,I,CACtBlH,WAAW,CAAE/B,SAAS,CAACiJ,I,CACvB3G,eAAe,CAAEtC,SAAS,CAACiJ,I,CAC3B7E,UAAU,CAAEpE,SAAS,CAACiJ,I,CACtBzE,cAAc,CAAExE,SAAS,CAACiJ,I,CAC1B7G,UAAU,CAAEpC,SAAS,CAACkJ,G,CACtBlC,KAAK,CAAEhH,SAAS,CAACkJ,G,GAjBA3I,M,CAoBZ4I,Y,CAAe,CACpBlH,YAAY,CAAE,gCAAGgC,CAAAA,KAAH,OAAGA,KAAH,OACZ,OAAOA,CAAAA,KAAK,CAACmF,KAAb,GAAuB,QAAvB,CAAkCnF,KAAK,CAACmF,KAAN,CAAYC,WAAZ,EAAlC,CAA8DpF,KAAK,CAACmF,KADxD,EADM,CAGpBV,aAAa,CAAE,iCAAGzE,CAAAA,KAAH,OAAGA,KAAH,OACb,OAAOA,CAAAA,KAAK,CAACqF,UAAb,GAA4B,WAA5B,CAA0CrF,KAAK,CAACqF,UAAhD,CAA6D,IADhD,EAHK,CAKpBf,qBAAqB,CAAE,yCAAGtE,CAAAA,KAAH,OAAGA,KAAH,OAAyBA,CAAAA,KAAK,CAACqE,kBAA/B,EALH,CAMpBG,SAAS,CAAE,6BAAGxE,CAAAA,KAAH,OAAGA,KAAH,OAAyBA,CAAAA,KAAK,CAACsF,MAA/B,EANS,C,QApBHhJ,M,aAudrB,GAAM2B,CAAAA,MAAM,CAAGuB,UAAU,CAAC+F,MAAX,CAAkB,CAC/BpC,SAAS,CAAE,CACTiB,IAAI,CAAE,CADG,CADoB,CAI/BnB,MAAM,CAAE,CACNuC,QAAQ,CAAEC,QAAQ,CAACC,EAAT,GAAgB,KAAhB,CAAyB,MAAzB,CAAwC,QAD5C,CAJuB,CAO/B5C,MAAM,CAAE,CACN6C,eAAe,CAAE,SADX,CAENC,SAAS,CAAE,CAFL,CAGNC,WAAW,CAAE,OAHP,CAINC,aAAa,CAAE,GAJT,CAKNC,YAAY,CAAEvG,UAAU,CAACwG,aALnB,CAMNC,YAAY,CAAE,CACZC,MAAM,CAAE1G,UAAU,CAACwG,aADP,CANR,CAUNG,MAAM,CAAEV,QAAQ,CAACC,EAAT,GAAgB,SAAhB,CAA4B,CAA5B,CAAgC,CAVlC,CAPuB,CAmB/BxC,UAAU,CAAE,CACVkD,aAAa,CAAE,KADL,CAEVC,QAAQ,CAAE,QAFA,CAnBmB,CAuB/BnI,QAAQ,CAAE,CACRyH,eAAe,CAAE,aADT,CAERW,KAAK,CAAE,OAFC,CAGRC,MAAM,CAAE,CAHA,CAvBqB,CA4B/B3B,OAAO,CAAE,CACPR,IAAI,CAAE,CADC,CAEPJ,OAAO,CAAE,CAFF,CAGPwC,UAAU,CAAE,QAHL,CAIPC,cAAc,CAAE,QAJT,CA5BsB,CAkC/B5C,KAAK,CAAE,CACLvF,QAAQ,CAAE,UADL,CAELoI,GAAG,CAAE,CAFA,CAGLC,KAAK,CAAE,CAHF,CAlCwB,CAuC/B3D,kBAAkB,CAAE,CAClB1E,QAAQ,CAAE,UADQ,CAElBoI,GAAG,CAAE,CAFa,CAGlBE,IAAI,CAAE,CAHY,CAIlBD,KAAK,CAAE,CAJW,CAKlBE,MAAM,CAAE,CALU,CAvCW,CA8C/B3H,SAAS,CAAE,CACTyG,eAAe,CAAE,SADR,CAETrH,QAAQ,CAAE,UAFD,CAGTsI,IAAI,CAAE,CAHG,CAITC,MAAM,CAAE,CAJC,CAKTF,KAAK,CAAE,CALE,CAMTT,MAAM,CAAE,CANC,CA9CoB,CAAlB,CAAf","sourcesContent":["/* @flow */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Animated,\n  NativeModules,\n  StyleSheet,\n  View,\n  ScrollView,\n  Platform,\n  I18nManager,\n} from 'react-native';\nimport TouchableItem from './TouchableItem';\nimport { SceneRendererPropType } from './PropTypes';\nimport type { Scene, SceneRendererProps } from './TypeDefinitions';\nimport type {\n  ViewStyleProp,\n  TextStyleProp,\n} from 'react-native/Libraries/StyleSheet/StyleSheet';\n\ntype IndicatorProps<T> = SceneRendererProps<T> & {\n  width: number,\n};\n\ntype Props<T> = SceneRendererProps<T> & {\n  scrollEnabled?: boolean,\n  bounces?: boolean,\n  pressColor?: string,\n  pressOpacity?: number,\n  getLabelText: (scene: Scene<T>) => ?string,\n  getAccessible: (scene: Scene<T>) => ?boolean,\n  getAccessibilityLabel: (scene: Scene<T>) => ?string,\n  getTestID: (scene: Scene<T>) => ?string,\n  renderLabel?: (scene: Scene<T>) => React.Node,\n  renderIcon?: (scene: Scene<T>) => React.Node,\n  renderBadge?: (scene: Scene<T>) => React.Node,\n  renderIndicator?: (props: IndicatorProps<T>) => React.Node,\n  onTabPress?: (scene: Scene<T>) => mixed,\n  onTabLongPress?: (scene: Scene<T>) => mixed,\n  tabStyle?: ViewStyleProp,\n  indicatorStyle?: ViewStyleProp,\n  labelStyle?: TextStyleProp,\n  style?: ViewStyleProp,\n};\n\ntype State = {|\n  visibility: Animated.Value,\n  scrollAmount: Animated.Value,\n  initialOffset: ?{| x: number, y: number |},\n|};\n\nconst useNativeDriver = Boolean(NativeModules.NativeAnimatedModule);\n\nexport default class TabBar<T: *> extends React.Component<Props<T>, State> {\n  static propTypes = {\n    ...SceneRendererPropType,\n    scrollEnabled: PropTypes.bool,\n    bounces: PropTypes.bool,\n    pressColor: TouchableItem.propTypes.pressColor,\n    pressOpacity: TouchableItem.propTypes.pressOpacity,\n    getLabelText: PropTypes.func,\n    getAccessible: PropTypes.func,\n    getAccessibilityLabel: PropTypes.func,\n    getTestID: PropTypes.func,\n    renderIcon: PropTypes.func,\n    renderLabel: PropTypes.func,\n    renderIndicator: PropTypes.func,\n    onTabPress: PropTypes.func,\n    onTabLongPress: PropTypes.func,\n    labelStyle: PropTypes.any,\n    style: PropTypes.any,\n  };\n\n  static defaultProps = {\n    getLabelText: ({ route }: Scene<T>) =>\n      typeof route.title === 'string' ? route.title.toUpperCase() : route.title,\n    getAccessible: ({ route }: Scene<T>) =>\n      typeof route.accessible !== 'undefined' ? route.accessible : true,\n    getAccessibilityLabel: ({ route }: Scene<T>) => route.accessibilityLabel,\n    getTestID: ({ route }: Scene<T>) => route.testID,\n  };\n\n  constructor(props: Props<T>) {\n    super(props);\n\n    let initialVisibility = 1;\n\n    if (this.props.scrollEnabled) {\n      const tabWidth = this._getTabWidth(this.props);\n      if (!tabWidth) {\n        initialVisibility = 0;\n      }\n    }\n\n    const initialOffset =\n      this.props.scrollEnabled && this.props.layout.width\n        ? {\n            x: this._getScrollAmount(\n              this.props,\n              this.props.navigationState.index\n            ),\n            y: 0,\n          }\n        : undefined;\n\n    this.state = {\n      visibility: new Animated.Value(initialVisibility),\n      scrollAmount: new Animated.Value(0),\n      initialOffset,\n    };\n  }\n\n  componentDidMount() {\n    this.props.scrollEnabled && this._startTrackingPosition();\n  }\n\n  componentDidUpdate(prevProps: Props<T>) {\n    const prevTabWidth = this._getTabWidth(prevProps);\n    const currentTabWidth = this._getTabWidth(this.props);\n    const pendingIndex =\n      typeof this._pendingIndex === 'number'\n        ? this._pendingIndex\n        : this.props.navigationState.index;\n\n    this._pendingIndex = null;\n\n    if (prevTabWidth !== currentTabWidth && currentTabWidth) {\n      this.state.visibility.setValue(1);\n    }\n\n    if (\n      prevProps.navigationState.routes.length !==\n        this.props.navigationState.routes.length ||\n      prevProps.layout.width !== this.props.layout.width\n    ) {\n      this._resetScroll(this.props.navigationState.index, false);\n    } else if (prevProps.navigationState.index !== pendingIndex) {\n      this._resetScroll(this.props.navigationState.index);\n    }\n  }\n\n  componentWillUnmount() {\n    this._stopTrackingPosition();\n  }\n\n  _scrollView: ?ScrollView;\n  _isIntial: boolean = true;\n  _isManualScroll: boolean = false;\n  _isMomentumScroll: boolean = false;\n  _pendingIndex: ?number;\n  _scrollResetCallback: any;\n  _lastPanX: ?number;\n  _lastOffsetX: ?number;\n  _panXListener: string;\n  _offsetXListener: string;\n\n  _startTrackingPosition = () => {\n    this._offsetXListener = this.props.offsetX.addListener(({ value }) => {\n      this._lastOffsetX = value;\n      this._handlePosition();\n    });\n    this._panXListener = this.props.panX.addListener(({ value }) => {\n      this._lastPanX = value;\n      this._handlePosition();\n    });\n  };\n\n  _stopTrackingPosition = () => {\n    this.props.offsetX.removeListener(this._offsetXListener);\n    this.props.panX.removeListener(this._panXListener);\n  };\n\n  _handlePosition = () => {\n    const { navigationState, layout } = this.props;\n\n    if (layout.width === 0) {\n      // Don't do anything if we don't have layout yet\n      return;\n    }\n\n    const panX = typeof this._lastPanX === 'number' ? this._lastPanX : 0;\n    const offsetX =\n      typeof this._lastOffsetX === 'number'\n        ? this._lastOffsetX\n        : -navigationState.index * layout.width;\n\n    const value = (panX + offsetX) / -(layout.width || 0.001);\n\n    this._adjustScroll(value);\n  };\n\n  _renderLabel = (scene: Scene<*>) => {\n    if (typeof this.props.renderLabel !== 'undefined') {\n      return this.props.renderLabel(scene);\n    }\n    const label = this.props.getLabelText(scene);\n    if (typeof label !== 'string') {\n      return null;\n    }\n    return (\n      <Animated.Text style={[styles.tabLabel, this.props.labelStyle]}>\n        {label}\n      </Animated.Text>\n    );\n  };\n\n  _renderIndicator = (props: IndicatorProps<T>) => {\n    if (typeof this.props.renderIndicator !== 'undefined') {\n      return this.props.renderIndicator(props);\n    }\n    const { width, position, navigationState } = props;\n    const translateX = Animated.multiply(\n      Animated.multiply(\n        position.interpolate({\n          inputRange: [-1, navigationState.routes.length],\n          outputRange: [-1, navigationState.routes.length],\n          extrapolate: 'clamp',\n        }),\n        width\n      ),\n      I18nManager.isRTL ? -1 : 1\n    );\n    return (\n      <Animated.View\n        style={[\n          styles.indicator,\n          { width, transform: [{ translateX }] },\n          this.props.indicatorStyle,\n        ]}\n      />\n    );\n  };\n\n  _getTabWidth = props => {\n    const { layout, navigationState, tabStyle } = props;\n    const flattened = StyleSheet.flatten(tabStyle);\n\n    if (flattened) {\n      switch (typeof flattened.width) {\n        case 'number':\n          return flattened.width;\n        case 'string':\n          if (flattened.width.endsWith('%')) {\n            const width = parseFloat(flattened.width);\n            if (Number.isFinite(width)) {\n              return layout.width * (width / 100);\n            }\n          }\n      }\n    }\n\n    if (props.scrollEnabled) {\n      return (layout.width / 5) * 2;\n    }\n\n    return layout.width / navigationState.routes.length;\n  };\n\n  _handleTabPress = ({ route }: Scene<*>) => {\n    this._pendingIndex = this.props.navigationState.routes.indexOf(route);\n\n    if (this.props.onTabPress) {\n      this.props.onTabPress({ route });\n    }\n\n    this.props.jumpTo(route.key);\n  };\n\n  _handleTabLongPress = ({ route }: Scene<*>) => {\n    if (this.props.onTabLongPress) {\n      this.props.onTabLongPress({ route });\n    }\n  };\n\n  _normalizeScrollValue = (props, value) => {\n    const { layout, navigationState } = props;\n    const tabWidth = this._getTabWidth(props);\n    const tabBarWidth = Math.max(\n      tabWidth * navigationState.routes.length,\n      layout.width\n    );\n    const maxDistance = tabBarWidth - layout.width;\n\n    return Math.max(Math.min(value, maxDistance), 0);\n  };\n\n  _getScrollAmount = (props, i) => {\n    const { layout } = props;\n    const tabWidth = this._getTabWidth(props);\n    const centerDistance = tabWidth * (i + 1 / 2);\n    const scrollAmount = centerDistance - layout.width / 2;\n\n    return this._normalizeScrollValue(props, scrollAmount);\n  };\n\n  _adjustScroll = (value: number) => {\n    if (this.props.scrollEnabled) {\n      global.cancelAnimationFrame(this._scrollResetCallback);\n      this._scrollView &&\n        this._scrollView.scrollTo({\n          x: this._normalizeScrollValue(\n            this.props,\n            this._getScrollAmount(this.props, value)\n          ),\n          animated: !this._isIntial, // Disable animation for the initial render\n        });\n\n      this._isIntial = false;\n    }\n  };\n\n  _resetScroll = (value: number, animated = true) => {\n    if (this.props.scrollEnabled) {\n      global.cancelAnimationFrame(this._scrollResetCallback);\n      this._scrollResetCallback = global.requestAnimationFrame(() => {\n        this._scrollView &&\n          this._scrollView.scrollTo({\n            x: this._getScrollAmount(this.props, value),\n            animated,\n          });\n      });\n    }\n  };\n\n  _handleBeginDrag = () => {\n    // onScrollBeginDrag fires when user touches the ScrollView\n    this._isManualScroll = true;\n    this._isMomentumScroll = false;\n  };\n\n  _handleEndDrag = () => {\n    // onScrollEndDrag fires when user lifts his finger\n    // onMomentumScrollBegin fires after touch end\n    // run the logic in next frame so we get onMomentumScrollBegin first\n    global.requestAnimationFrame(() => {\n      if (this._isMomentumScroll) {\n        return;\n      }\n      this._isManualScroll = false;\n    });\n  };\n\n  _handleMomentumScrollBegin = () => {\n    // onMomentumScrollBegin fires on flick, as well as programmatic scroll\n    this._isMomentumScroll = true;\n  };\n\n  _handleMomentumScrollEnd = () => {\n    // onMomentumScrollEnd fires when the scroll finishes\n    this._isMomentumScroll = false;\n    this._isManualScroll = false;\n  };\n\n  render() {\n    const { position, navigationState, scrollEnabled, bounces } = this.props;\n    const { routes } = navigationState;\n    const tabWidth = this._getTabWidth(this.props);\n    const tabBarWidth = tabWidth * routes.length;\n\n    // Prepend '-1', so there are always at least 2 items in inputRange\n    const inputRange = [-1, ...routes.map((x, i) => i)];\n    const translateX = Animated.multiply(this.state.scrollAmount, -1);\n\n    return (\n      <Animated.View style={[styles.tabBar, this.props.style]}>\n        <Animated.View\n          pointerEvents=\"none\"\n          style={[\n            styles.indicatorContainer,\n            scrollEnabled\n              ? { width: tabBarWidth, transform: [{ translateX }] }\n              : null,\n          ]}\n        >\n          {this._renderIndicator({\n            ...this.props,\n            width: tabWidth,\n          })}\n        </Animated.View>\n        <View style={styles.scroll}>\n          <Animated.ScrollView\n            horizontal\n            keyboardShouldPersistTaps=\"handled\"\n            scrollEnabled={scrollEnabled}\n            bounces={bounces}\n            alwaysBounceHorizontal={false}\n            scrollsToTop={false}\n            showsHorizontalScrollIndicator={false}\n            automaticallyAdjustContentInsets={false}\n            overScrollMode=\"never\"\n            contentContainerStyle={[\n              styles.tabContent,\n              scrollEnabled ? null : styles.container,\n            ]}\n            scrollEventThrottle={1}\n            onScroll={Animated.event(\n              [\n                {\n                  nativeEvent: {\n                    contentOffset: { x: this.state.scrollAmount },\n                  },\n                },\n              ],\n              { useNativeDriver }\n            )}\n            onScrollBeginDrag={this._handleBeginDrag}\n            onScrollEndDrag={this._handleEndDrag}\n            onMomentumScrollBegin={this._handleMomentumScrollBegin}\n            onMomentumScrollEnd={this._handleMomentumScrollEnd}\n            contentOffset={this.state.initialOffset}\n            ref={el => (this._scrollView = el && el.getNode())}\n          >\n            {routes.map((route, i) => {\n              const outputRange = inputRange.map(\n                inputIndex => (inputIndex === i ? 1 : 0.7)\n              );\n              const opacity = Animated.multiply(\n                this.state.visibility,\n                position.interpolate({\n                  inputRange,\n                  outputRange,\n                })\n              );\n              const label = this._renderLabel({ route });\n              const icon = this.props.renderIcon\n                ? this.props.renderIcon({ route })\n                : null;\n              const badge = this.props.renderBadge\n                ? this.props.renderBadge({ route })\n                : null;\n\n              const tabStyle = {};\n\n              tabStyle.opacity = opacity;\n\n              if (icon) {\n                if (label) {\n                  tabStyle.paddingTop = 8;\n                } else {\n                  tabStyle.padding = 12;\n                }\n              }\n\n              const passedTabStyle = StyleSheet.flatten(this.props.tabStyle);\n              const isWidthSet =\n                (passedTabStyle &&\n                  typeof passedTabStyle.width !== 'undefined') ||\n                scrollEnabled === true;\n              const tabContainerStyle = {};\n\n              if (isWidthSet) {\n                tabStyle.width = tabWidth;\n              }\n\n              if (passedTabStyle && typeof passedTabStyle.flex === 'number') {\n                tabContainerStyle.flex = passedTabStyle.flex;\n              } else if (!isWidthSet) {\n                tabContainerStyle.flex = 1;\n              }\n\n              let accessibilityLabel = this.props.getAccessibilityLabel({\n                route,\n              });\n\n              accessibilityLabel =\n                typeof accessibilityLabel !== 'undefined'\n                  ? accessibilityLabel\n                  : this.props.getLabelText({ route });\n\n              const isFocused = i === navigationState.index;\n\n              return (\n                <TouchableItem\n                  borderless\n                  key={route.key}\n                  testID={this.props.getTestID({ route })}\n                  accessible={this.props.getAccessible({ route })}\n                  accessibilityLabel={accessibilityLabel}\n                  accessibilityTraits={\n                    isFocused ? ['button', 'selected'] : 'button'\n                  }\n                  accessibilityComponentType=\"button\"\n                  accessibilityRole=\"button\"\n                  accessibilityStates={isFocused ? ['selected'] : []}\n                  pressColor={this.props.pressColor}\n                  pressOpacity={this.props.pressOpacity}\n                  delayPressIn={0}\n                  onPress={() => this._handleTabPress({ route })}\n                  onLongPress={() => this._handleTabLongPress({ route })}\n                  style={tabContainerStyle}\n                >\n                  <View pointerEvents=\"none\" style={styles.container}>\n                    <Animated.View\n                      style={[\n                        styles.tabItem,\n                        tabStyle,\n                        passedTabStyle,\n                        styles.container,\n                      ]}\n                    >\n                      {icon}\n                      {label}\n                    </Animated.View>\n                    {badge ? (\n                      <Animated.View\n                        style={[\n                          styles.badge,\n                          { opacity: this.state.visibility },\n                        ]}\n                      >\n                        {badge}\n                      </Animated.View>\n                    ) : null}\n                  </View>\n                </TouchableItem>\n              );\n            })}\n          </Animated.ScrollView>\n        </View>\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scroll: {\n    overflow: Platform.OS === 'web' ? ('auto': any) : 'scroll',\n  },\n  tabBar: {\n    backgroundColor: '#2196f3',\n    elevation: 4,\n    shadowColor: 'black',\n    shadowOpacity: 0.1,\n    shadowRadius: StyleSheet.hairlineWidth,\n    shadowOffset: {\n      height: StyleSheet.hairlineWidth,\n    },\n    // We don't need zIndex on Android, disable it since it's buggy\n    zIndex: Platform.OS === 'android' ? 0 : 1,\n  },\n  tabContent: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n  },\n  tabLabel: {\n    backgroundColor: 'transparent',\n    color: 'white',\n    margin: 8,\n  },\n  tabItem: {\n    flex: 1,\n    padding: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  badge: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n  },\n  indicatorContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}