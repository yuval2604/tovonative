{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/brentvatne/coding/react-navigation-stack/src/views/Header/ModularHeaderBackButton.tsx\";import*as React from'react';import I18nManager from\"react-native-web/dist/exports/I18nManager\";import Image from\"react-native-web/dist/exports/Image\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableItem from\"../TouchableItem\";import defaultBackImage from\"../assets/back-icon.png\";var ModularHeaderBackButton=function(_React$PureComponent){_inherits(ModularHeaderBackButton,_React$PureComponent);function ModularHeaderBackButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,ModularHeaderBackButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ModularHeaderBackButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={};_this.onTextLayout=function(e){if(_this.state.initialTextWidth){return;}_this.setState({initialTextWidth:e.nativeEvent.layout.x+e.nativeEvent.layout.width});};_this.getTitleText=function(){var _this$props=_this.props,width=_this$props.width,title=_this$props.title,truncatedTitle=_this$props.truncatedTitle;var initialTextWidth=_this.state.initialTextWidth;if(title===null){return null;}else if(!title){return truncatedTitle;}else if(initialTextWidth&&width&&initialTextWidth>width){return truncatedTitle;}else{return title.length>8?truncatedTitle:title;}};return _this;}_createClass(ModularHeaderBackButton,[{key:\"renderBackImage\",value:function renderBackImage(){var _this$props2=this.props,backImage=_this$props2.backImage,backTitleVisible=_this$props2.backTitleVisible,tintColor=_this$props2.tintColor;if(React.isValidElement(backImage)){return backImage;}else if(backImage){var BackImage=backImage;return React.createElement(BackImage,{tintColor:tintColor,__source:{fileName:_jsxFileName,lineNumber:50}});}else{return React.createElement(Image,{style:[styles.icon,!!backTitleVisible&&styles.iconWithTitle,!!tintColor&&{tintColor:tintColor}],source:defaultBackImage,__source:{fileName:_jsxFileName,lineNumber:53}});}}},{key:\"maybeRenderTitle\",value:function maybeRenderTitle(){var _this$props3=this.props,backTitleVisible=_this$props3.backTitleVisible,titleStyle=_this$props3.titleStyle,tintColor=_this$props3.tintColor;var backTitleText=this.getTitleText();if(!backTitleVisible||backTitleText===null){return null;}var LabelContainerComponent=this.props.LabelContainerComponent;return React.createElement(LabelContainerComponent,{__source:{fileName:_jsxFileName,lineNumber:92}},React.createElement(Text,{accessible:false,onLayout:this.onTextLayout,style:[styles.title,!!tintColor&&{color:tintColor},titleStyle],numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:93}},this.getTitleText()));}},{key:\"render\",value:function render(){var _this$props4=this.props,onPress=_this$props4.onPress,title=_this$props4.title;var ButtonContainerComponent=this.props.ButtonContainerComponent;return React.createElement(TouchableItem,{accessibilityComponentType:\"button\",accessibilityLabel:title?title+\", back\":'Go back',accessibilityTraits:\"button\",testID:\"header-back\",delayPressIn:0,onPress:onPress,style:styles.container,borderless:true,__source:{fileName:_jsxFileName,lineNumber:114}},React.createElement(View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:124}},React.createElement(ButtonContainerComponent,{__source:{fileName:_jsxFileName,lineNumber:125}},this.renderBackImage()),this.maybeRenderTitle()));}}]);return ModularHeaderBackButton;}(React.PureComponent);ModularHeaderBackButton.defaultProps={tintColor:'#037aff',truncatedTitle:'Back'};var styles=StyleSheet.create({container:{alignItems:'center',flexDirection:'row',backgroundColor:'transparent',marginBottom:1,overflow:'visible'},title:{fontSize:17,paddingRight:10},icon:{height:21,width:12,marginLeft:9,marginRight:22,marginVertical:12,resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]},iconWithTitle:{marginRight:3}});export default ModularHeaderBackButton;","map":{"version":3,"sources":["ModularHeaderBackButton.tsx"],"names":["ModularHeaderBackButton","React","PureComponent","defaultProps","tintColor","truncatedTitle","state","onTextLayout","initialTextWidth","e","backImage","backTitleVisible","BackImage","styles","getTitleText","width","title","titleStyle","backTitleText","LabelContainerComponent","color","onPress","ButtonContainerComponent","StyleSheet","container","alignItems","flexDirection","backgroundColor","marginBottom","overflow","fontSize","paddingRight","icon","height","marginLeft","marginRight","marginVertical","resizeMode","transform","scaleX","I18nManager","iconWithTitle"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  I18nManager,\n  Image,\n  Text,\n  View,\n  StyleSheet,\n  LayoutChangeEvent,\n} from 'react-native';\n\nimport TouchableItem from '../TouchableItem';\n\nimport defaultBackImage from '../assets/back-icon.png';\nimport { HeaderBackbuttonProps } from '../../types';\n\ntype Props = HeaderBackbuttonProps & {\n  LabelContainerComponent: React.ComponentType;\n  ButtonContainerComponent: React.ComponentType;\n};\n\ntype State = {\n  initialTextWidth?: number;\n};\n\nclass ModularHeaderBackButton extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    tintColor: '#037aff',\n    truncatedTitle: 'Back',\n  };\n\n  state: State = {};\n\n  private onTextLayout = (e: LayoutChangeEvent) => {\n    if (this.state.initialTextWidth) {\n      return;\n    }\n    this.setState({\n      initialTextWidth: e.nativeEvent.layout.x + e.nativeEvent.layout.width,\n    });\n  };\n\n  private renderBackImage() {\n    const { backImage, backTitleVisible, tintColor } = this.props;\n\n    if (React.isValidElement(backImage)) {\n      return backImage;\n    } else if (backImage) {\n      const BackImage = backImage;\n\n      return <BackImage tintColor={tintColor} />;\n    } else {\n      return (\n        <Image\n          style={[\n            styles.icon,\n            !!backTitleVisible && styles.iconWithTitle,\n            !!tintColor && { tintColor },\n          ]}\n          source={defaultBackImage}\n        />\n      );\n    }\n  }\n\n  private getTitleText = () => {\n    const { width, title, truncatedTitle } = this.props;\n\n    let { initialTextWidth } = this.state;\n\n    if (title === null) {\n      return null;\n    } else if (!title) {\n      return truncatedTitle;\n    } else if (initialTextWidth && width && initialTextWidth > width) {\n      return truncatedTitle;\n    } else {\n      return title.length > 8 ? truncatedTitle : title;\n    }\n  };\n\n  private maybeRenderTitle() {\n    const { backTitleVisible, titleStyle, tintColor } = this.props;\n    let backTitleText = this.getTitleText();\n\n    if (!backTitleVisible || backTitleText === null) {\n      return null;\n    }\n\n    const { LabelContainerComponent } = this.props;\n\n    return (\n      <LabelContainerComponent>\n        <Text\n          accessible={false}\n          onLayout={this.onTextLayout}\n          style={[\n            styles.title,\n            !!tintColor && { color: tintColor },\n            titleStyle,\n          ]}\n          numberOfLines={1}\n        >\n          {this.getTitleText()}\n        </Text>\n      </LabelContainerComponent>\n    );\n  }\n\n  render() {\n    const { onPress, title } = this.props;\n    const { ButtonContainerComponent } = this.props;\n\n    return (\n      <TouchableItem\n        accessibilityComponentType=\"button\"\n        accessibilityLabel={title ? `${title}, back` : 'Go back'}\n        accessibilityTraits=\"button\"\n        testID=\"header-back\"\n        delayPressIn={0}\n        onPress={onPress}\n        style={styles.container}\n        borderless\n      >\n        <View style={styles.container}>\n          <ButtonContainerComponent>\n            {this.renderBackImage()}\n          </ButtonContainerComponent>\n          {this.maybeRenderTitle()}\n        </View>\n      </TouchableItem>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: 'transparent',\n    marginBottom: 1,\n    overflow: 'visible',\n  },\n  title: {\n    fontSize: 17,\n    paddingRight: 10,\n  },\n  icon: {\n    height: 21,\n    width: 12,\n    marginLeft: 9,\n    marginRight: 22,\n    marginVertical: 12,\n    resizeMode: 'contain',\n    transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n  },\n  iconWithTitle: {\n    marginRight: 3,\n  },\n});\n\nexport default ModularHeaderBackButton;\n"]},"metadata":{},"sourceType":"module"}