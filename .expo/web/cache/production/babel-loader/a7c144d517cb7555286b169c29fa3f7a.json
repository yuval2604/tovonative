{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.DeckSwiper=undefined;var _jsxFileName='src/basic/DeckSwiper.js';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactNative=require(\"react-native-web/dist/index\");var _clamp=require('clamp');var _clamp2=_interopRequireDefault(_clamp);var _nativeBaseShoutemTheme=require('native-base-shoutem-theme');var _mapPropsToStyleNames=require(\"../utils/mapPropsToStyleNames\");var _mapPropsToStyleNames2=_interopRequireDefault(_mapPropsToStyleNames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SWIPE_THRESHOLD=120;var DeckSwiper=function(_Component){_inherits(DeckSwiper,_Component);function DeckSwiper(props){_classCallCheck(this,DeckSwiper);var _this=_possibleConstructorReturn(this,(DeckSwiper.__proto__||Object.getPrototypeOf(DeckSwiper)).call(this,props));_this.getInitialStyle=function(){return{topCard:{position:'absolute',top:0,right:0,left:0}};};_this.state={pan:new _reactNative.Animated.ValueXY(),pan2:new _reactNative.Animated.ValueXY(),enter:new _reactNative.Animated.Value(0.8),selectedItem:_this.props.dataSource[0],selectedItem2:_this.props.dataSource[1],card1Top:true,card2Top:false,fadeAnim:new _reactNative.Animated.Value(0.8),looping:typeof _this.props.looping==='undefined'?true:_this.props.looping,disabled:_this.props.dataSource.length===0,lastCard:_this.props.dataSource.length===1};_this.setPanresponder();return _this;}_createClass(DeckSwiper,[{key:'componentDidUpdate',value:function componentDidUpdate(_ref){var dataSource=_ref.dataSource;if(dataSource.length!==this.props.dataSource.length){if(dataSource.length<=1){this.setState(_extends({},this.state,{selectedItem:dataSource[0],selectedItem2:undefined,disabled:dataSource.length===0,lastCard:dataSource.length===1}));return;}var visibleIndex=dataSource.indexOf(this.state.selectedItem);var currentIndex=visibleIndex<0?visibleIndex+1:visibleIndex;var nextIndex=currentIndex+1===dataSource.length?0:currentIndex+1;this.setState({selectedItem:dataSource[currentIndex],selectedItem2:dataSource[nextIndex]});}}},{key:'getCardStyles',value:function getCardStyles(){var _state=this.state,pan=_state.pan,enter=_state.enter;var _ref2=[pan.x,pan.y],translateX=_ref2[0],translateY=_ref2[1];var rotate=pan.x.interpolate({inputRange:[-700,0,700],outputRange:['-10deg','0deg','10deg']});var opacity=pan.x.interpolate({inputRange:[-320,0,320],outputRange:[0.9,1,0.9]});var scale=enter;var animatedCardStyles={transform:[{translateX:translateX},{translateY:translateY},{rotate:rotate}],opacity:opacity};var animatedCardStyles2={transform:[{scale:scale}]};return[animatedCardStyles,animatedCardStyles2];}},{key:'setPanresponder',value:function setPanresponder(){var _this2=this;this._panResponder=_reactNative.PanResponder.create({onMoveShouldSetResponderCapture:function onMoveShouldSetResponderCapture(){return true;},onMoveShouldSetPanResponderCapture:function onMoveShouldSetPanResponderCapture(evt,gestureState){return Math.abs(gestureState.dx)>5;},onPanResponderGrant:function onPanResponderGrant(){_this2.state.pan.setOffset({x:_this2.state.pan.x._value,y:_this2.state.pan.y._value});_this2.state.pan.setValue({x:0,y:0});},onPanResponderMove:function onPanResponderMove(e,gestureState){if(gestureState.dx>20){if(_this2.props.onSwiping)_this2.props.onSwiping('right',gestureState.dx);}else if(gestureState.dx<-20){if(_this2.props.onSwiping)_this2.props.onSwiping('left',gestureState.dx);}var val=Math.abs(gestureState.dx*0.0013);if(val>0.2){val=0.2;}_reactNative.Animated.timing(_this2.state.fadeAnim,{toValue:0.8+val}).start();_reactNative.Animated.spring(_this2.state.enter,{toValue:0.8+val,friction:7}).start();_reactNative.Animated.event([null,{dx:_this2.state.pan.x}])(e,gestureState);},onPanResponderRelease:function onPanResponderRelease(e,_ref3){var vx=_ref3.vx,vy=_ref3.vy;if(_this2.props.onSwiping)_this2.props.onSwiping(null);var velocity=void 0;if(vx>=0){velocity=(0,_clamp2.default)(vx,4.5,10);}else if(vx<0){velocity=(0,_clamp2.default)(vx*-1,4.5,10)*-1;}if(Math.abs(_this2.state.pan.x._value)>SWIPE_THRESHOLD){if(velocity>0){_this2.props.onSwipeRight?_this2.props.onSwipeRight(_this2.state.selectedItem):undefined;_this2.selectNext();}else{_this2.props.onSwipeLeft?_this2.props.onSwipeLeft(_this2.state.selectedItem):undefined;_this2.selectNext();}_reactNative.Animated.decay(_this2.state.pan,{velocity:{x:velocity,y:vy},deceleration:0.98}).start(_this2._resetState.bind(_this2));}else{_reactNative.Animated.spring(_this2.state.pan,{toValue:{x:0,y:0},friction:4}).start();}}});}},{key:'_resetState',value:function _resetState(){this.state.pan.setValue({x:0,y:0});this.state.enter.setValue(0.8);this.state.fadeAnim.setValue(0.8);this.setState({card1Top:!this.state.card1Top,card2Top:!this.state.card2Top});if(this.props.onSwiping)this.props.onSwiping(null);}},{key:'swipeRight',value:function swipeRight(){var _this3=this;if(this.props.onSwiping)this.props.onSwiping('right');setTimeout(function(){_reactNative.Animated.timing(_this3.state.fadeAnim,{toValue:1}).start();_reactNative.Animated.spring(_this3.state.enter,{toValue:1,friction:7}).start();_this3.selectNext();_reactNative.Animated.decay(_this3.state.pan,{velocity:{x:8,y:1},deceleration:0.98}).start(_this3._resetState.bind(_this3));},300);}},{key:'swipeLeft',value:function swipeLeft(){var _this4=this;if(this.props.onSwiping)this.props.onSwiping('left');setTimeout(function(){_reactNative.Animated.timing(_this4.state.fadeAnim,{toValue:1}).start();_reactNative.Animated.spring(_this4.state.enter,{toValue:1,friction:7}).start();_this4.selectNext();_reactNative.Animated.decay(_this4.state.pan,{velocity:{x:-8,y:1},deceleration:0.98}).start(_this4._resetState.bind(_this4));},300);}},{key:'selectNext',value:function selectNext(){var _this5=this;var dataSource=this.props.dataSource;var currentIndex=dataSource.indexOf(this.state.selectedItem);if(!this.state.looping){if(currentIndex===dataSource.length-1){return this.setState({disabled:true});}else if(currentIndex===dataSource.length-2){return setTimeout(function(){_this5.setState({selectedItem:dataSource[currentIndex+1]});setTimeout(function(){_this5.setState({lastCard:true});},350);},50);}}var nextIndexes=this.findNextIndexes(currentIndex);setTimeout(function(){_this5.setState({selectedItem:_this5.props.dataSource[nextIndexes[0]]});setTimeout(function(){_this5.setState({selectedItem2:_this5.props.dataSource[nextIndexes[1]]});},350);},50);return null;}},{key:'findNextIndexes',value:function findNextIndexes(currentIndex){var newIdx=currentIndex+1;var newIdx2=currentIndex+2;if(newIdx2>this.props.dataSource.length-1&&newIdx===this.props.dataSource.length-1){return[newIdx,0];}else if(newIdx>this.props.dataSource.length-1){return[0,1];}return[newIdx,newIdx2];}},{key:'render',value:function render(){if(this.state.disabled){return _react2.default.createElement(_reactNative.View,{style:{position:'relative',flexDirection:'column'},__source:{fileName:_jsxFileName,lineNumber:261}},_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:262}},this.props.renderEmpty&&this.props.renderEmpty()));}else if(this.state.lastCard){return _react2.default.createElement(_reactNative.View,{style:{position:'relative',flexDirection:'column'},__source:{fileName:_jsxFileName,lineNumber:268}},this.state.selectedItem===undefined?_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:270}}):_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:272}},_react2.default.createElement(_reactNative.Animated.View,_extends({style:[this.getCardStyles()[1],this.getInitialStyle().topCard,{opacity:this.state.fadeAnim}]},this._panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:273}}),this.props.renderEmpty&&this.props.renderEmpty()),_react2.default.createElement(_reactNative.Animated.View,_extends({style:[this.getCardStyles()[0],this.getInitialStyle().topCard]},this._panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:283}}),this.props.renderItem(this.state.selectedItem))));}return _react2.default.createElement(_reactNative.View,{style:{position:'relative',flexDirection:'column'},__source:{fileName:_jsxFileName,lineNumber:298}},this.state.selectedItem===undefined?_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:300}}):_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:302}},_react2.default.createElement(_reactNative.Animated.View,_extends({style:[this.getCardStyles()[1],this.getInitialStyle().topCard,{opacity:this.state.fadeAnim}]},this._panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:303}}),this.props.renderBottom?this.props.renderBottom(this.state.selectedItem2):this.props.renderItem(this.state.selectedItem2)),_react2.default.createElement(_reactNative.Animated.View,_extends({style:[this.getCardStyles()[0],this.getInitialStyle().topCard]},this._panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:315}}),this.props.renderTop?this.props.renderTop(this.state.selectedItem):this.props.renderItem(this.state.selectedItem))));}}]);return DeckSwiper;}(_react.Component);DeckSwiper.propTypes=_extends({},_reactNative.ViewPropTypes,{style:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.number,_propTypes2.default.array]),dataSource:_propTypes2.default.array});var StyledDeckSwiper=(0,_nativeBaseShoutemTheme.connectStyle)('NativeBase.DeckSwiper',{},_mapPropsToStyleNames2.default)(DeckSwiper);exports.DeckSwiper=StyledDeckSwiper;","map":{"version":3,"sources":["../../../src/basic/DeckSwiper.js"],"names":["SWIPE_THRESHOLD","DeckSwiper","Component","pan","Animated","pan2","enter","selectedItem","selectedItem2","card1Top","card2Top","fadeAnim","looping","disabled","lastCard","dataSource","visibleIndex","currentIndex","nextIndex","topCard","position","top","right","left","translateX","translateY","rotate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","animatedCardStyles2","PanResponder","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","Math","gestureState","onPanResponderGrant","x","y","onPanResponderMove","val","toValue","friction","dx","onPanResponderRelease","vx","vy","velocity","deceleration","setTimeout","nextIndexes","newIdx","newIdx2","flexDirection","ViewPropTypes","style","PropTypes","StyledDeckSwiper","mapPropsToStyleNames"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, Animated, PanResponder, ViewPropTypes } from 'react-native';\nimport clamp from 'clamp';\nimport { connectStyle } from 'native-base-shoutem-theme';\n\nimport mapPropsToStyleNames from '../utils/mapPropsToStyleNames';\n\nconst SWIPE_THRESHOLD = 120;\n\nclass DeckSwiper extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pan: new Animated.ValueXY(),\n      pan2: new Animated.ValueXY(),\n      enter: new Animated.Value(0.8),\n      selectedItem: this.props.dataSource[0],\n      selectedItem2: this.props.dataSource[1],\n      card1Top: true,\n      card2Top: false,\n      fadeAnim: new Animated.Value(0.8),\n      looping:\n        typeof this.props.looping === 'undefined' ? true : this.props.looping,\n      disabled: this.props.dataSource.length === 0,\n      lastCard: this.props.dataSource.length === 1\n    };\n    this.setPanresponder();\n  }\n\n  componentDidUpdate({ dataSource }) {\n    if (dataSource.length !== this.props.dataSource.length) {\n      if (dataSource.length <= 1) {\n        this.setState({\n          ...this.state,\n          selectedItem: dataSource[0],\n          selectedItem2: undefined,\n          disabled: dataSource.length === 0,\n          lastCard: dataSource.length === 1\n        });\n        return;\n      }\n\n      const visibleIndex = dataSource.indexOf(this.state.selectedItem);\n      const currentIndex = visibleIndex < 0 ? visibleIndex + 1 : visibleIndex;\n      const nextIndex =\n        currentIndex + 1 === dataSource.length ? 0 : currentIndex + 1;\n\n      this.setState({\n        selectedItem: dataSource[currentIndex],\n        selectedItem2: dataSource[nextIndex]\n      });\n    }\n  }\n\n  getInitialStyle = () => {\n    return {\n      topCard: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        left: 0\n      }\n    };\n  };\n\n  getCardStyles() {\n    const { pan, enter } = this.state;\n\n    const [translateX, translateY] = [pan.x, pan.y];\n    // let [translateX, translateY] = [pan2.x, pan2.y];\n\n    const rotate = pan.x.interpolate({\n      inputRange: [-700, 0, 700],\n      outputRange: ['-10deg', '0deg', '10deg']\n    });\n\n    const opacity = pan.x.interpolate({\n      inputRange: [-320, 0, 320],\n      outputRange: [0.9, 1, 0.9]\n    });\n    const scale = enter;\n\n    const animatedCardStyles = {\n      transform: [{ translateX }, { translateY }, { rotate }],\n      opacity\n    };\n    const animatedCardStyles2 = { transform: [{ scale }] };\n\n    return [animatedCardStyles, animatedCardStyles2];\n  }\n\n  setPanresponder() {\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetResponderCapture: () => true,\n      onMoveShouldSetPanResponderCapture: (evt, gestureState) =>\n        Math.abs(gestureState.dx) > 5,\n\n      onPanResponderGrant: () => {\n        this.state.pan.setOffset({\n          x: this.state.pan.x._value,\n          y: this.state.pan.y._value\n        });\n        this.state.pan.setValue({ x: 0, y: 0 });\n      },\n\n      onPanResponderMove: (e, gestureState) => {\n        if (gestureState.dx > 20) {\n          if (this.props.onSwiping)\n            this.props.onSwiping('right', gestureState.dx);\n        } else if (gestureState.dx < -20) {\n          if (this.props.onSwiping)\n            this.props.onSwiping('left', gestureState.dx);\n        }\n        let val = Math.abs(gestureState.dx * 0.0013);\n        if (val > 0.2) {\n          val = 0.2;\n        }\n        Animated.timing(this.state.fadeAnim, { toValue: 0.8 + val }).start();\n        Animated.spring(this.state.enter, {\n          toValue: 0.8 + val,\n          friction: 7\n        }).start();\n        Animated.event([null, { dx: this.state.pan.x }])(e, gestureState);\n      },\n\n      onPanResponderRelease: (e, { vx, vy }) => {\n        if (this.props.onSwiping) this.props.onSwiping(null);\n        let velocity;\n\n        if (vx >= 0) {\n          velocity = clamp(vx, 4.5, 10);\n        } else if (vx < 0) {\n          velocity = clamp(vx * -1, 4.5, 10) * -1;\n        }\n\n        if (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\n          if (velocity > 0) {\n            this.props.onSwipeRight\n              ? this.props.onSwipeRight(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          } else {\n            this.props.onSwipeLeft\n              ? this.props.onSwipeLeft(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          }\n\n          Animated.decay(this.state.pan, {\n            velocity: { x: velocity, y: vy },\n            deceleration: 0.98\n          }).start(this._resetState.bind(this));\n        } else {\n          Animated.spring(this.state.pan, {\n            toValue: { x: 0, y: 0 },\n            friction: 4\n          }).start();\n        }\n      }\n    });\n  }\n\n  _resetState() {\n    this.state.pan.setValue({ x: 0, y: 0 });\n    this.state.enter.setValue(0.8);\n    this.state.fadeAnim.setValue(0.8);\n    this.setState({\n      card1Top: !this.state.card1Top,\n      card2Top: !this.state.card2Top\n    });\n    if (this.props.onSwiping) this.props.onSwiping(null);\n  }\n\n  swipeRight() {\n    if (this.props.onSwiping) this.props.onSwiping('right');\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: { x: 8, y: 1 },\n        deceleration: 0.98\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  swipeLeft() {\n    if (this.props.onSwiping) this.props.onSwiping('left');\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: { x: -8, y: 1 },\n        deceleration: 0.98\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  selectNext() {\n    const dataSource = this.props.dataSource;\n    const currentIndex = dataSource.indexOf(this.state.selectedItem);\n\n    // if not looping, check for these conditionals and if true return from selectNext()\n    if (!this.state.looping) {\n      // reached end -> only display static renderEmpty() -> no swiping\n      if (currentIndex === dataSource.length - 1) {\n        return this.setState({\n          disabled: true\n        });\n      } else if (currentIndex === dataSource.length - 2) {\n        // show last card with renderEmpty() component behind it\n        return setTimeout(() => {\n          this.setState({\n            selectedItem: dataSource[currentIndex + 1]\n          });\n          setTimeout(() => {\n            this.setState({\n              lastCard: true\n            });\n          }, 350);\n        }, 50);\n      }\n    }\n\n    const nextIndexes = this.findNextIndexes(currentIndex);\n    setTimeout(() => {\n      this.setState({\n        selectedItem: this.props.dataSource[nextIndexes[0]]\n      });\n      setTimeout(() => {\n        this.setState({\n          selectedItem2: this.props.dataSource[nextIndexes[1]]\n        });\n      }, 350);\n    }, 50);\n\n    return null;\n  }\n\n  findNextIndexes(currentIndex) {\n    const newIdx = currentIndex + 1;\n    const newIdx2 = currentIndex + 2;\n\n    if (\n      newIdx2 > this.props.dataSource.length - 1 &&\n      newIdx === this.props.dataSource.length - 1\n    ) {\n      return [newIdx, 0];\n    } else if (newIdx > this.props.dataSource.length - 1) {\n      return [0, 1];\n    }\n    return [newIdx, newIdx2];\n  }\n\n  render() {\n    if (this.state.disabled) {\n      // disable swiping and renderEmpty\n      return (\n        <View style={{ position: 'relative', flexDirection: 'column' }}>\n          {<View>{this.props.renderEmpty && this.props.renderEmpty()}</View>}\n        </View>\n      );\n    } else if (this.state.lastCard) {\n      // display renderEmpty underneath last viable card\n      return (\n        <View style={{ position: 'relative', flexDirection: 'column' }}>\n          {this.state.selectedItem === undefined ? (\n            <View />\n          ) : (\n            <View>\n              <Animated.View\n                style={[\n                  this.getCardStyles()[1],\n                  this.getInitialStyle().topCard,\n                  { opacity: this.state.fadeAnim }\n                ]}\n                {...this._panResponder.panHandlers}\n              >\n                {this.props.renderEmpty && this.props.renderEmpty()}\n              </Animated.View>\n              <Animated.View\n                style={[\n                  this.getCardStyles()[0],\n                  this.getInitialStyle().topCard\n                ]}\n                {...this._panResponder.panHandlers}\n              >\n                {this.props.renderItem(this.state.selectedItem)}\n              </Animated.View>\n            </View>\n          )}\n        </View>\n      );\n    }\n    return (\n      <View style={{ position: 'relative', flexDirection: 'column' }}>\n        {this.state.selectedItem === undefined ? (\n          <View />\n        ) : (\n          <View>\n            <Animated.View\n              style={[\n                this.getCardStyles()[1],\n                this.getInitialStyle().topCard,\n                { opacity: this.state.fadeAnim }\n              ]}\n              {...this._panResponder.panHandlers}\n            >\n              {this.props.renderBottom\n                ? this.props.renderBottom(this.state.selectedItem2)\n                : this.props.renderItem(this.state.selectedItem2)}\n            </Animated.View>\n            <Animated.View\n              style={[this.getCardStyles()[0], this.getInitialStyle().topCard]}\n              {...this._panResponder.panHandlers}\n            >\n              {this.props.renderTop\n                ? this.props.renderTop(this.state.selectedItem)\n                : this.props.renderItem(this.state.selectedItem)}\n            </Animated.View>\n          </View>\n        )}\n      </View>\n    );\n  }\n}\n\nDeckSwiper.propTypes = {\n  ...ViewPropTypes,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array\n  ]),\n  // eslint-disable-next-line react/forbid-prop-types\n  dataSource: PropTypes.array\n};\n\nconst StyledDeckSwiper = connectStyle(\n  'NativeBase.DeckSwiper',\n  {},\n  mapPropsToStyleNames\n)(DeckSwiper);\n\nexport { StyledDeckSwiper as DeckSwiper };\n"]},"metadata":{},"sourceType":"script"}