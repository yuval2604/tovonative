{"ast":null,"code":"var _regeneratorRuntime=require(\"@babel/runtime/regenerator\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.DatePicker=undefined;var _jsxFileName='src/basic/DatePicker.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require(\"react-native-web/dist/index\");var _platform=require(\"../theme/variables/platform\");var _platform2=_interopRequireDefault(_platform);var _commonColor=require(\"../theme/variables/commonColor\");var _Text=require(\"./Text\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var DatePicker=exports.DatePicker=function(_React$Component){_inherits(DatePicker,_React$Component);function DatePicker(props){_classCallCheck(this,DatePicker);var _this=_possibleConstructorReturn(this,(DatePicker.__proto__||Object.getPrototypeOf(DatePicker)).call(this,props));_this.showDatePicker=function(){if(_reactNative.Platform.OS===_commonColor.PLATFORM.ANDROID){_this.openAndroidDatePicker();}else{_this.setState({modalVisible:true});}};_this.state={modalVisible:false,defaultDate:props.defaultDate?props.defaultDate:new Date(),chosenDate:!props.placeHolderText&&props.defaultDate?props.defaultDate:undefined};return _this;}_createClass(DatePicker,[{key:'setDate',value:function setDate(date){this.setState({chosenDate:new Date(date)});if(this.props.onDateChange){this.props.onDateChange(date);}}},{key:'openAndroidDatePicker',value:function openAndroidDatePicker(){var newDate,action,year,month,day,selectedDate,code,message;return _regeneratorRuntime.async(function openAndroidDatePicker$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(_reactNative.DatePickerAndroid.open({date:this.state.chosenDate?this.state.chosenDate:this.state.defaultDate,minDate:this.props.minimumDate,maxDate:this.props.maximumDate,mode:this.props.androidMode}));case 3:newDate=_context.sent;action=newDate.action,year=newDate.year,month=newDate.month,day=newDate.day;if(action==='dateSetAction'){selectedDate=new Date(year,month,day);this.setState({chosenDate:selectedDate});this.props.onDateChange(selectedDate);}_context.next=13;break;case 8:_context.prev=8;_context.t0=_context['catch'](0);code=_context.t0.code;message=_context.t0.message;console.warn('Cannot open date picker',message);case 13:case'end':return _context.stop();}}},null,this,[[0,8]]);}},{key:'formatChosenDate',value:function formatChosenDate(date){if(this.props.formatChosenDate){return this.props.formatChosenDate(date);}return[date.getDate(),date.getMonth()+1,date.getFullYear()].join('/');}},{key:'render',value:function render(){var _this2=this;var _props=this.props,animationType=_props.animationType,disabled=_props.disabled,locale=_props.locale,maximumDate=_props.maximumDate,minimumDate=_props.minimumDate,modalTransparent=_props.modalTransparent,placeHolderText=_props.placeHolderText,placeHolderTextStyle=_props.placeHolderTextStyle,textStyle=_props.textStyle,timeZoneOffsetInMinutes=_props.timeZoneOffsetInMinutes;var variables=this.context.theme?this.context.theme['@@shoutem.theme/themeStyle'].variables:_platform2.default;return _react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:93}},_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:94}},_react2.default.createElement(_Text.Text,{onPress:function onPress(){return!disabled?_this2.showDatePicker():undefined;},style:[{padding:variables.datePickerPadding,color:variables.datePickerTextColor},this.state.chosenDate?textStyle:placeHolderTextStyle],__source:{fileName:_jsxFileName,lineNumber:95}},this.state.chosenDate?this.formatChosenDate(this.state.chosenDate):placeHolderText||'Select Date'),_react2.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:109}},_react2.default.createElement(_reactNative.Modal,{supportedOrientations:['portrait','landscape'],animationType:animationType,transparent:modalTransparent,visible:this.state.modalVisible,onRequestClose:function onRequestClose(){},__source:{fileName:_jsxFileName,lineNumber:110}},_react2.default.createElement(_Text.Text,{onPress:function onPress(){return _this2.setState({modalVisible:false});},style:{backgroundColor:variables.datePickerBg,flex:variables.datePickerFlex},__source:{fileName:_jsxFileName,lineNumber:117}}),_react2.default.createElement(_reactNative.DatePickerIOS,{date:this.state.chosenDate?this.state.chosenDate:this.state.defaultDate,onDateChange:function onDateChange(date){return _this2.setDate(date);},minimumDate:minimumDate,maximumDate:maximumDate,mode:'date',locale:locale,timeZoneOffsetInMinutes:timeZoneOffsetInMinutes,__source:{fileName:_jsxFileName,lineNumber:124}})))));}}]);return DatePicker;}(_react2.default.Component);DatePicker.defaultProps={disabled:false};","map":{"version":3,"sources":["../../../src/basic/DatePicker.js"],"names":["DatePicker","React","Component","defaultProps","disabled","modalVisible","defaultDate","props","chosenDate","date","Platform","PLATFORM","newDate","DatePickerAndroid","minDate","maxDate","mode","action","year","month","day","selectedDate","code","message","console","animationType","locale","maximumDate","minimumDate","modalTransparent","placeHolderText","placeHolderTextStyle","textStyle","timeZoneOffsetInMinutes","variables","variable","padding","color","backgroundColor","flex"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Modal,\n  View,\n  Platform,\n  DatePickerIOS,\n  DatePickerAndroid\n} from 'react-native';\n\nimport variable from '../theme/variables/platform';\nimport { PLATFORM } from '../theme/variables/commonColor';\n\nimport { Text } from './Text';\n\nexport class DatePicker extends React.Component {\n  static defaultProps = {\n    disabled: false\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalVisible: false,\n      defaultDate: props.defaultDate ? props.defaultDate : new Date(),\n      chosenDate:\n        !props.placeHolderText && props.defaultDate\n          ? props.defaultDate\n          : undefined\n    };\n  }\n\n  setDate(date) {\n    this.setState({ chosenDate: new Date(date) });\n    if (this.props.onDateChange) {\n      this.props.onDateChange(date);\n    }\n  }\n\n  showDatePicker = () => {\n    if (Platform.OS === PLATFORM.ANDROID) {\n      this.openAndroidDatePicker();\n    } else {\n      this.setState({ modalVisible: true });\n    }\n  };\n\n  async openAndroidDatePicker() {\n    try {\n      const newDate = await DatePickerAndroid.open({\n        date: this.state.chosenDate\n          ? this.state.chosenDate\n          : this.state.defaultDate,\n        minDate: this.props.minimumDate,\n        maxDate: this.props.maximumDate,\n        mode: this.props.androidMode\n      });\n      const { action, year, month, day } = newDate;\n      if (action === 'dateSetAction') {\n        const selectedDate = new Date(year, month, day);\n        this.setState({ chosenDate: selectedDate });\n        this.props.onDateChange(selectedDate);\n      }\n    } catch ({ code, message }) {\n      console.warn('Cannot open date picker', message);\n    }\n  }\n\n  formatChosenDate(date) {\n    if (this.props.formatChosenDate) {\n      return this.props.formatChosenDate(date);\n    }\n    return [date.getDate(), date.getMonth() + 1, date.getFullYear()].join('/');\n  }\n\n  render() {\n    const {\n      animationType,\n      disabled,\n      locale,\n      maximumDate,\n      minimumDate,\n      modalTransparent,\n      placeHolderText,\n      placeHolderTextStyle,\n      textStyle,\n      timeZoneOffsetInMinutes\n    } = this.props;\n\n    const variables = this.context.theme\n      ? this.context.theme['@@shoutem.theme/themeStyle'].variables\n      : variable;\n\n    return (\n      <View>\n        <View>\n          <Text\n            onPress={() => (!disabled ? this.showDatePicker() : undefined)}\n            style={[\n              {\n                padding: variables.datePickerPadding,\n                color: variables.datePickerTextColor\n              },\n              this.state.chosenDate ? textStyle : placeHolderTextStyle\n            ]}\n          >\n            {this.state.chosenDate\n              ? this.formatChosenDate(this.state.chosenDate)\n              : placeHolderText || 'Select Date'}\n          </Text>\n          <View>\n            <Modal\n              supportedOrientations={['portrait', 'landscape']}\n              animationType={animationType}\n              transparent={modalTransparent} // from api\n              visible={this.state.modalVisible}\n              onRequestClose={() => {}}\n            >\n              <Text\n                onPress={() => this.setState({ modalVisible: false })}\n                style={{\n                  backgroundColor: variables.datePickerBg,\n                  flex: variables.datePickerFlex\n                }}\n              />\n              <DatePickerIOS\n                date={\n                  this.state.chosenDate\n                    ? this.state.chosenDate\n                    : this.state.defaultDate\n                }\n                onDateChange={date => this.setDate(date)}\n                minimumDate={minimumDate}\n                maximumDate={maximumDate}\n                mode=\"date\"\n                locale={locale}\n                timeZoneOffsetInMinutes={timeZoneOffsetInMinutes}\n              />\n            </Modal>\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}