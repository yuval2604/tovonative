{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import PropTypes from'prop-types';import Animated from\"react-native-web/dist/exports/Animated\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Platform from\"react-native-web/dist/exports/Platform\";import{PagerRendererPropType}from\"./PropTypes\";var DEAD_ZONE=12;var DefaultTransitionSpec={timing:Animated.spring,tension:300,friction:35};var PagerPan=function(_React$Component){_inherits(PagerPan,_React$Component);function PagerPan(){var _getPrototypeOf2;var _this;_classCallCheck(this,PagerPan);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PagerPan)).call.apply(_getPrototypeOf2,[this].concat(args)));_this._currentIndex=_this.props.navigationState.index;_this._isMovingHorizontally=function(evt,gestureState){return Math.abs(gestureState.dx)>Math.abs(gestureState.dy*2)&&Math.abs(gestureState.vx)>Math.abs(gestureState.vy*2);};_this._canMoveScreen=function(evt,gestureState){if(_this.props.swipeEnabled===false){return false;}var routes=_this.props.navigationState.routes;return _this._isMovingHorizontally(evt,gestureState)&&(gestureState.dx>=DEAD_ZONE&&_this._currentIndex>0||gestureState.dx<=-DEAD_ZONE&&_this._currentIndex<routes.length-1);};_this._startGesture=function(){_this.props.onSwipeStart&&_this.props.onSwipeStart();_this.props.panX.stopAnimation();};_this._respondToGesture=function(evt,gestureState){var _this$props$navigatio=_this.props.navigationState,routes=_this$props$navigatio.routes,index=_this$props$navigatio.index;if(gestureState.dx>0&&index<=0||gestureState.dx<0&&index>=routes.length-1){return;}_this.props.panX.setValue(gestureState.dx);};_this._finishGesture=function(evt,gestureState){var _this$props=_this.props,navigationState=_this$props.navigationState,layout=_this$props.layout,_this$props$swipeDist=_this$props.swipeDistanceThreshold,swipeDistanceThreshold=_this$props$swipeDist===void 0?layout.width/1.75:_this$props$swipeDist;var _this$props$swipeVelo=_this.props.swipeVelocityThreshold,swipeVelocityThreshold=_this$props$swipeVelo===void 0?0.15:_this$props$swipeVelo;_this.props.onSwipeEnd&&_this.props.onSwipeEnd();if(Platform.OS==='android'){swipeVelocityThreshold/=1000000;}var currentIndex=typeof _this._pendingIndex==='number'?_this._pendingIndex:_this._currentIndex;var nextIndex=currentIndex;if(Math.abs(gestureState.dx)>Math.abs(gestureState.dy)&&Math.abs(gestureState.vx)>Math.abs(gestureState.vy)&&(Math.abs(gestureState.dx)>swipeDistanceThreshold||Math.abs(gestureState.vx)>swipeVelocityThreshold)){nextIndex=Math.round(Math.min(Math.max(0,currentIndex-gestureState.dx/Math.abs(gestureState.dx)),navigationState.routes.length-1));_this._currentIndex=nextIndex;}if(!isFinite(nextIndex)||!_this.props.canJumpToTab({route:_this.props.navigationState.routes[nextIndex]})){nextIndex=currentIndex;}_this._transitionTo(nextIndex);};_this._transitionTo=function(index){var animated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var offset=-index*_this.props.layout.width;var route=_this.props.navigationState.routes[index];if(_this.props.animationEnabled===false||animated===false){_this.props.panX.setValue(0);_this.props.offsetX.setValue(offset);_this.props.jumpTo(route.key);return;}var timing=DefaultTransitionSpec.timing,transitionConfig=_objectWithoutProperties(DefaultTransitionSpec,[\"timing\"]);Animated.parallel([timing(_this.props.panX,_objectSpread({},transitionConfig,{toValue:0})),timing(_this.props.offsetX,_objectSpread({},transitionConfig,{toValue:offset}))]).start(function(_ref){var finished=_ref.finished;if(finished){_this.props.jumpTo(route.key);_this.props.onAnimationEnd&&_this.props.onAnimationEnd();_this._pendingIndex=null;}});_this._pendingIndex=index;};_this._panResponder=PanResponder.create({onMoveShouldSetPanResponder:_this._canMoveScreen,onMoveShouldSetPanResponderCapture:_this._canMoveScreen,onPanResponderGrant:_this._startGesture,onPanResponderMove:_this._respondToGesture,onPanResponderTerminate:_this._finishGesture,onPanResponderRelease:_this._finishGesture,onPanResponderTerminationRequest:function onPanResponderTerminationRequest(){return true;}});return _this;}_createClass(PagerPan,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){this._currentIndex=this.props.navigationState.index;if(prevProps.navigationState.routes.length!==this.props.navigationState.routes.length||prevProps.layout.width!==this.props.layout.width){this._transitionTo(this.props.navigationState.index,false);}else if(prevProps.navigationState.index!==this.props.navigationState.index){this._transitionTo(this.props.navigationState.index);}}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,panX=_this$props2.panX,offsetX=_this$props2.offsetX,navigationState=_this$props2.navigationState,layout=_this$props2.layout,children=_this$props2.children;var width=layout.width;var routes=navigationState.routes;var maxTranslate=width*(routes.length-1);var translateX=Animated.multiply(Animated.add(panX,offsetX).interpolate({inputRange:[-maxTranslate,0],outputRange:[-maxTranslate,0],extrapolate:'clamp'}),I18nManager.isRTL?-1:1);return React.createElement(Animated.View,_extends({style:[styles.sheet,width?{width:routes.length*width,transform:[{translateX:translateX}]}:null]},this._panResponder.panHandlers),React.Children.map(children,function(child,i){var route=navigationState.routes[i];var focused=i===navigationState.index;return React.createElement(View,{key:route.key,testID:_this2.props.getTestID({route:route}),style:width?{width:width}:focused?StyleSheet.absoluteFill:null},focused||width?child:null);}));}}]);return PagerPan;}(React.Component);PagerPan.propTypes=_objectSpread({},PagerRendererPropType,{swipeDistanceThreshold:PropTypes.number,swipeVelocityThreshold:PropTypes.number});PagerPan.defaultProps={canJumpToTab:function canJumpToTab(){return true;},initialLayout:{height:0,width:0}};export{PagerPan as default};var styles=StyleSheet.create({sheet:{flex:1,flexDirection:'row',alignItems:'stretch'}});","map":{"version":3,"sources":["/Users/user/Documents/codecanyon-B1UUUVLW-harrier-react-native-ecommerce-ui-kit-template/eCommerce2/node_modules/react-native-tab-view/src/PagerPan.js"],"names":["React","PropTypes","PagerRendererPropType","DEAD_ZONE","DefaultTransitionSpec","timing","Animated","spring","tension","friction","PagerPan","_currentIndex","props","navigationState","index","_isMovingHorizontally","evt","gestureState","Math","abs","dx","dy","vx","vy","_canMoveScreen","swipeEnabled","routes","length","_startGesture","onSwipeStart","panX","stopAnimation","_respondToGesture","setValue","_finishGesture","layout","swipeDistanceThreshold","width","swipeVelocityThreshold","onSwipeEnd","Platform","OS","currentIndex","_pendingIndex","nextIndex","round","min","max","isFinite","canJumpToTab","route","_transitionTo","animated","offset","animationEnabled","offsetX","jumpTo","key","transitionConfig","parallel","toValue","start","finished","onAnimationEnd","_panResponder","PanResponder","create","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderGrant","onPanResponderMove","onPanResponderTerminate","onPanResponderRelease","onPanResponderTerminationRequest","prevProps","children","maxTranslate","translateX","multiply","add","interpolate","inputRange","outputRange","extrapolate","I18nManager","isRTL","styles","sheet","transform","panHandlers","Children","map","child","i","focused","getTestID","StyleSheet","absoluteFill","Component","propTypes","number","defaultProps","initialLayout","height","flex","flexDirection","alignItems"],"mappings":"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","sourcesContent":["/* @flow */\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Animated,\n  I18nManager,\n  PanResponder,\n  StyleSheet,\n  View,\n  Platform,\n} from 'react-native';\nimport { PagerRendererPropType } from './PropTypes';\nimport type { PagerRendererProps } from './TypeDefinitions';\n\ntype GestureEvent = {\n  nativeEvent: {\n    changedTouches: Array<*>,\n    identifier: number,\n    locationX: number,\n    locationY: number,\n    pageX: number,\n    pageY: number,\n    target: number,\n    timestamp: number,\n    touches: Array<*>,\n  },\n};\n\ntype GestureState = {\n  stateID: number,\n  moveX: number,\n  moveY: number,\n  x0: number,\n  y0: number,\n  dx: number,\n  dy: number,\n  vx: number,\n  vy: number,\n  numberActiveTouches: number,\n};\n\ntype Props<T> = PagerRendererProps<T> & {\n  swipeDistanceThreshold?: number,\n  swipeVelocityThreshold?: number,\n};\n\nconst DEAD_ZONE = 12;\n\nconst DefaultTransitionSpec = {\n  timing: Animated.spring,\n  tension: 300,\n  friction: 35,\n};\n\nexport default class PagerPan<T: *> extends React.Component<Props<T>> {\n  static propTypes = {\n    ...PagerRendererPropType,\n    swipeDistanceThreshold: PropTypes.number,\n    swipeVelocityThreshold: PropTypes.number,\n  };\n\n  static defaultProps = {\n    canJumpToTab: () => true,\n    initialLayout: {\n      height: 0,\n      width: 0,\n    },\n  };\n\n  componentDidUpdate(prevProps: Props<T>) {\n    this._currentIndex = this.props.navigationState.index;\n\n    if (\n      prevProps.navigationState.routes.length !==\n        this.props.navigationState.routes.length ||\n      prevProps.layout.width !== this.props.layout.width\n    ) {\n      this._transitionTo(this.props.navigationState.index, false);\n    } else if (\n      prevProps.navigationState.index !== this.props.navigationState.index\n    ) {\n      this._transitionTo(this.props.navigationState.index);\n    }\n  }\n\n  _currentIndex = this.props.navigationState.index;\n  _pendingIndex: ?number;\n\n  _isMovingHorizontally = (evt: GestureEvent, gestureState: GestureState) => {\n    return (\n      Math.abs(gestureState.dx) > Math.abs(gestureState.dy * 2) &&\n      Math.abs(gestureState.vx) > Math.abs(gestureState.vy * 2)\n    );\n  };\n\n  _canMoveScreen = (evt: GestureEvent, gestureState: GestureState) => {\n    if (this.props.swipeEnabled === false) {\n      return false;\n    }\n\n    const {\n      navigationState: { routes },\n    } = this.props;\n\n    return (\n      this._isMovingHorizontally(evt, gestureState) &&\n      ((gestureState.dx >= DEAD_ZONE && this._currentIndex > 0) ||\n        (gestureState.dx <= -DEAD_ZONE &&\n          this._currentIndex < routes.length - 1))\n    );\n  };\n\n  _startGesture = () => {\n    this.props.onSwipeStart && this.props.onSwipeStart();\n    this.props.panX.stopAnimation();\n  };\n\n  _respondToGesture = (evt: GestureEvent, gestureState: GestureState) => {\n    const {\n      navigationState: { routes, index },\n    } = this.props;\n\n    if (\n      // swiping left\n      (gestureState.dx > 0 && index <= 0) ||\n      // swiping right\n      (gestureState.dx < 0 && index >= routes.length - 1)\n    ) {\n      return;\n    }\n\n    this.props.panX.setValue(gestureState.dx);\n  };\n\n  _finishGesture = (evt: GestureEvent, gestureState: GestureState) => {\n    const {\n      navigationState,\n      layout,\n      swipeDistanceThreshold = layout.width / 1.75,\n    } = this.props;\n\n    let { swipeVelocityThreshold = 0.15 } = this.props;\n\n    this.props.onSwipeEnd && this.props.onSwipeEnd();\n\n    if (Platform.OS === 'android') {\n      // on Android, velocity is way lower due to timestamp being in nanosecond\n      // normalize it to have the same velocity on both iOS and Android\n      swipeVelocityThreshold /= 1000000;\n    }\n\n    const currentIndex =\n      typeof this._pendingIndex === 'number'\n        ? this._pendingIndex\n        : this._currentIndex;\n\n    let nextIndex = currentIndex;\n\n    if (\n      Math.abs(gestureState.dx) > Math.abs(gestureState.dy) &&\n      Math.abs(gestureState.vx) > Math.abs(gestureState.vy) &&\n      (Math.abs(gestureState.dx) > swipeDistanceThreshold ||\n        Math.abs(gestureState.vx) > swipeVelocityThreshold)\n    ) {\n      nextIndex = Math.round(\n        Math.min(\n          Math.max(\n            0,\n            currentIndex - gestureState.dx / Math.abs(gestureState.dx)\n          ),\n          navigationState.routes.length - 1\n        )\n      );\n\n      this._currentIndex = nextIndex;\n    }\n\n    if (\n      !isFinite(nextIndex) ||\n      !this.props.canJumpToTab({\n        route: this.props.navigationState.routes[nextIndex],\n      })\n    ) {\n      nextIndex = currentIndex;\n    }\n\n    this._transitionTo(nextIndex);\n  };\n\n  _transitionTo = (index: number, animated: boolean = true) => {\n    const offset = -index * this.props.layout.width;\n    const route = this.props.navigationState.routes[index];\n\n    if (this.props.animationEnabled === false || animated === false) {\n      this.props.panX.setValue(0);\n      this.props.offsetX.setValue(offset);\n      this.props.jumpTo(route.key);\n      return;\n    }\n\n    const { timing, ...transitionConfig } = DefaultTransitionSpec;\n\n    Animated.parallel([\n      timing(this.props.panX, {\n        ...transitionConfig,\n        toValue: 0,\n      }),\n      timing(this.props.offsetX, {\n        ...transitionConfig,\n        toValue: offset,\n      }),\n    ]).start(({ finished }) => {\n      if (finished) {\n        this.props.jumpTo(route.key);\n        this.props.onAnimationEnd && this.props.onAnimationEnd();\n        this._pendingIndex = null;\n      }\n    });\n\n    this._pendingIndex = index;\n  };\n\n  _panResponder = PanResponder.create({\n    onMoveShouldSetPanResponder: this._canMoveScreen,\n    onMoveShouldSetPanResponderCapture: this._canMoveScreen,\n    onPanResponderGrant: this._startGesture,\n    onPanResponderMove: this._respondToGesture,\n    onPanResponderTerminate: this._finishGesture,\n    onPanResponderRelease: this._finishGesture,\n    onPanResponderTerminationRequest: () => true,\n  });\n\n  render() {\n    const { panX, offsetX, navigationState, layout, children } = this.props;\n    const { width } = layout;\n    const { routes } = navigationState;\n    const maxTranslate = width * (routes.length - 1);\n    const translateX = Animated.multiply(\n      Animated.add(panX, offsetX).interpolate({\n        inputRange: [-maxTranslate, 0],\n        outputRange: [-maxTranslate, 0],\n        extrapolate: 'clamp',\n      }),\n      I18nManager.isRTL ? -1 : 1\n    );\n\n    return (\n      <Animated.View\n        style={[\n          styles.sheet,\n          width\n            ? {\n                width: routes.length * width,\n                transform: [{ translateX }],\n              }\n            : null,\n        ]}\n        {...this._panResponder.panHandlers}\n      >\n        {React.Children.map(children, (child, i) => {\n          const route = navigationState.routes[i];\n          const focused = i === navigationState.index;\n\n          return (\n            <View\n              key={route.key}\n              testID={this.props.getTestID({ route })}\n              style={\n                width ? { width } : focused ? StyleSheet.absoluteFill : null\n              }\n            >\n              {focused || width ? child : null}\n            </View>\n          );\n        })}\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  sheet: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'stretch',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}