{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/objectSpread\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/brentvatne/coding/react-navigation-stack/src/views/Header/HeaderBackButton.tsx\";import*as React from'react';import I18nManager from\"react-native-web/dist/exports/I18nManager\";import Image from\"react-native-web/dist/exports/Image\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableItem from\"../TouchableItem\";import defaultBackImage from\"../assets/back-icon.png\";import BackButtonWeb from\"./BackButtonWeb\";var HeaderBackButton=function(_React$PureComponent){_inherits(HeaderBackButton,_React$PureComponent);function HeaderBackButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,HeaderBackButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(HeaderBackButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={};_this.handleTextLayout=function(e){if(_this.state.initialTextWidth){return;}_this.setState({initialTextWidth:e.nativeEvent.layout.x+e.nativeEvent.layout.width});};_this.getTitleText=function(){var _this$props=_this.props,width=_this$props.width,title=_this$props.title,truncatedTitle=_this$props.truncatedTitle;var initialTextWidth=_this.state.initialTextWidth;if(title===null){return null;}else if(!title){return truncatedTitle;}else if(initialTextWidth&&width&&initialTextWidth>width){return truncatedTitle;}else{return title;}};return _this;}_createClass(HeaderBackButton,[{key:\"renderBackImage\",value:function renderBackImage(){var _this$props2=this.props,backImage=_this$props2.backImage,backTitleVisible=_this$props2.backTitleVisible,tintColor=_this$props2.tintColor;var title=this.getTitleText();if(React.isValidElement(backImage)){return backImage;}else if(backImage){var BackImage=backImage;return React.createElement(BackImage,{tintColor:tintColor,title:title,__source:{fileName:_jsxFileName,lineNumber:59}});}else{return React.createElement(Image,{style:[styles.icon,!!backTitleVisible&&styles.iconWithTitle,!!tintColor&&{tintColor:tintColor}],source:defaultBackImage,fadeDuration:0,__source:{fileName:_jsxFileName,lineNumber:62}});}}},{key:\"maybeRenderTitle\",value:function maybeRenderTitle(){var _this$props3=this.props,allowFontScaling=_this$props3.allowFontScaling,backTitleVisible=_this$props3.backTitleVisible,titleStyle=_this$props3.titleStyle,tintColor=_this$props3.tintColor;var backTitleText=this.getTitleText();if(!backTitleVisible||backTitleText===null){return null;}return React.createElement(Text,{accessible:false,onLayout:this.handleTextLayout,style:[styles.title,!!tintColor&&{color:tintColor},titleStyle],numberOfLines:1,allowFontScaling:!!allowFontScaling,__source:{fileName:_jsxFileName,lineNumber:105}},this.getTitleText());}},{key:\"render\",value:function render(){var _this$props4=this.props,onPress=_this$props4.onPress,pressColorAndroid=_this$props4.pressColorAndroid,title=_this$props4.title,disabled=_this$props4.disabled;var button=React.createElement(TouchableItem,{disabled:disabled,accessible:true,accessibilityRole:\"button\",accessibilityComponentType:\"button\",accessibilityLabel:title?title+\", back\":'Go back',accessibilityTraits:\"button\",testID:\"header-back\",delayPressIn:0,onPress:disabled?undefined:onPress,pressColor:pressColorAndroid,style:[styles.container,disabled&&styles.disabled],borderless:true,__source:{fileName:_jsxFileName,lineNumber:121}},React.createElement(View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:135}},this.renderBackImage(),this.maybeRenderTitle()));if(Platform.OS==='ios'){return button;}else{return React.createElement(View,{style:styles.androidButtonWrapper,__source:{fileName:_jsxFileName,lineNumber:145}},button);}}}]);return HeaderBackButton;}(React.PureComponent);HeaderBackButton.defaultProps={pressColorAndroid:'rgba(0, 0, 0, .32)',tintColor:Platform.select({ios:'#037aff',web:'#5f6368'}),truncatedTitle:'Back',backImage:Platform.select({web:BackButtonWeb})};var styles=StyleSheet.create({disabled:{opacity:0.5},androidButtonWrapper:_objectSpread({margin:13,backgroundColor:'transparent'},Platform.select({web:{marginLeft:21},default:{}})),container:{alignItems:'center',flexDirection:'row',backgroundColor:'transparent'},title:{fontSize:17,paddingRight:10},icon:Platform.select({ios:{backgroundColor:'transparent',height:21,width:13,marginLeft:9,marginRight:22,marginVertical:12,resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]},default:{height:24,width:24,margin:3,resizeMode:'contain',backgroundColor:'transparent',transform:[{scaleX:I18nManager.isRTL?-1:1}]}}),iconWithTitle:Platform.OS==='ios'?{marginRight:6}:{}});export default HeaderBackButton;","map":{"version":3,"sources":["HeaderBackButton.tsx"],"names":["HeaderBackButton","React","PureComponent","defaultProps","pressColorAndroid","tintColor","Platform","ios","web","truncatedTitle","backImage","state","handleTextLayout","initialTextWidth","e","backTitleVisible","title","BackImage","styles","getTitleText","width","allowFontScaling","titleStyle","backTitleText","color","onPress","disabled","button","StyleSheet","opacity","androidButtonWrapper","margin","backgroundColor","marginLeft","default","container","alignItems","flexDirection","fontSize","paddingRight","icon","height","marginRight","marginVertical","resizeMode","transform","scaleX","I18nManager","iconWithTitle"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  I18nManager,\n  Image,\n  Text,\n  View,\n  Platform,\n  StyleSheet,\n  LayoutChangeEvent,\n} from 'react-native';\n\nimport TouchableItem from '../TouchableItem';\n\nimport defaultBackImage from '../assets/back-icon.png';\nimport BackButtonWeb from './BackButtonWeb';\nimport { HeaderBackbuttonProps } from '../../types';\n\ntype State = {\n  initialTextWidth?: number;\n};\n\nclass HeaderBackButton extends React.PureComponent<\n  HeaderBackbuttonProps,\n  State\n> {\n  static defaultProps = {\n    pressColorAndroid: 'rgba(0, 0, 0, .32)',\n    tintColor: Platform.select({\n      ios: '#037aff',\n      web: '#5f6368',\n    }),\n    truncatedTitle: 'Back',\n    backImage: Platform.select({\n      web: BackButtonWeb,\n    }),\n  };\n\n  state: State = {};\n\n  private handleTextLayout = (e: LayoutChangeEvent) => {\n    if (this.state.initialTextWidth) {\n      return;\n    }\n    this.setState({\n      initialTextWidth: e.nativeEvent.layout.x + e.nativeEvent.layout.width,\n    });\n  };\n\n  private renderBackImage() {\n    const { backImage, backTitleVisible, tintColor } = this.props;\n\n    let title = this.getTitleText();\n\n    if (React.isValidElement(backImage)) {\n      return backImage;\n    } else if (backImage) {\n      const BackImage = backImage;\n\n      return <BackImage tintColor={tintColor} title={title} />;\n    } else {\n      return (\n        <Image\n          style={[\n            styles.icon,\n            !!backTitleVisible && styles.iconWithTitle,\n            !!tintColor && { tintColor },\n          ]}\n          source={defaultBackImage}\n          fadeDuration={0}\n        />\n      );\n    }\n  }\n\n  private getTitleText = () => {\n    const { width, title, truncatedTitle } = this.props;\n\n    let { initialTextWidth } = this.state;\n\n    if (title === null) {\n      return null;\n    } else if (!title) {\n      return truncatedTitle;\n    } else if (initialTextWidth && width && initialTextWidth > width) {\n      return truncatedTitle;\n    } else {\n      return title;\n    }\n  };\n\n  private maybeRenderTitle() {\n    const {\n      allowFontScaling,\n      backTitleVisible,\n      titleStyle,\n      tintColor,\n    } = this.props;\n    let backTitleText = this.getTitleText();\n\n    if (!backTitleVisible || backTitleText === null) {\n      return null;\n    }\n\n    return (\n      <Text\n        accessible={false}\n        onLayout={this.handleTextLayout}\n        style={[styles.title, !!tintColor && { color: tintColor }, titleStyle]}\n        numberOfLines={1}\n        allowFontScaling={!!allowFontScaling}\n      >\n        {this.getTitleText()}\n      </Text>\n    );\n  }\n\n  render() {\n    const { onPress, pressColorAndroid, title, disabled } = this.props;\n\n    let button = (\n      <TouchableItem\n        disabled={disabled}\n        accessible\n        accessibilityRole=\"button\"\n        accessibilityComponentType=\"button\"\n        accessibilityLabel={title ? `${title}, back` : 'Go back'}\n        accessibilityTraits=\"button\"\n        testID=\"header-back\"\n        delayPressIn={0}\n        onPress={disabled ? undefined : onPress}\n        pressColor={pressColorAndroid}\n        style={[styles.container, disabled && styles.disabled]}\n        borderless\n      >\n        <View style={styles.container}>\n          {this.renderBackImage()}\n          {this.maybeRenderTitle()}\n        </View>\n      </TouchableItem>\n    );\n\n    if (Platform.OS === 'ios') {\n      return button;\n    } else {\n      return <View style={styles.androidButtonWrapper}>{button}</View>;\n    }\n  }\n}\n\nconst styles = StyleSheet.create({\n  disabled: {\n    opacity: 0.5,\n  },\n  androidButtonWrapper: {\n    margin: 13,\n    backgroundColor: 'transparent',\n    ...Platform.select({\n      web: {\n        marginLeft: 21,\n      },\n      default: {},\n    }),\n  },\n  container: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: 'transparent',\n  },\n  title: {\n    fontSize: 17,\n    paddingRight: 10,\n  },\n  icon: Platform.select({\n    ios: {\n      backgroundColor: 'transparent',\n      height: 21,\n      width: 13,\n      marginLeft: 9,\n      marginRight: 22,\n      marginVertical: 12,\n      resizeMode: 'contain',\n      transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n    },\n    default: {\n      height: 24,\n      width: 24,\n      margin: 3,\n      resizeMode: 'contain',\n      backgroundColor: 'transparent',\n      transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n    },\n  }),\n  iconWithTitle:\n    Platform.OS === 'ios'\n      ? {\n          marginRight: 6,\n        }\n      : {},\n});\n\nexport default HeaderBackButton;\n"]},"metadata":{},"sourceType":"module"}